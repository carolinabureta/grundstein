<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content=My><meta name=author content=Lyz><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.11"><title>PDM - The green Book</title><link rel=stylesheet href=../assets/stylesheets/main.7e359304.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../css/timeago.css><link rel=stylesheet href=../stylesheets/extra.css><link rel=stylesheet href=../stylesheets/links.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=light-blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#features class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> </div> </aside> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="The green Book" class="md-header__button md-logo" aria-label="The green Book" data-md-component=logo> <img src=../img/moo_labastelaria.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> The green Book </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> PDM </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=light-blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue-grey data-md-color-accent=light-blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/realcaptainsolaris/redbook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> realcaptainsolaris/redbook </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="The green Book" class="md-nav__button md-logo" aria-label="The green Book" data-md-component=logo> <img src=../img/moo_labastelaria.png alt=logo> </a> The green Book </label> <div class=md-nav__source> <a href=https://github.com/realcaptainsolaris/redbook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> realcaptainsolaris/redbook </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../contact/ class=md-nav__link> <span class=md-ellipsis> Contact </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Uebungen </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Uebungen </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../uebungen/beispiel/ class=md-nav__link> <span class=md-ellipsis> Test1 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> DesignLab </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> DesignLab </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../designlab/slime/ class=md-nav__link> <span class=md-ellipsis> Slime </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> DesignClub </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> DesignClub </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../designclub/concept/ class=md-nav__link> <span class=md-ellipsis> Concept </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#features class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> <nav class=md-nav aria-label=Installation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#recommended-installation-method class=md-nav__link> <span class=md-ellipsis> Recommended installation method </span> </a> </li> <li class=md-nav__item> <a href=#other-methods class=md-nav__link> <span class=md-ellipsis> Other methods </span> </a> </li> <li class=md-nav__item> <a href=#enable-pep-582-globally class=md-nav__link> <span class=md-ellipsis> Enable PEP 582 globally </span> </a> </li> <li class=md-nav__item> <a href=#use-it-with-the-ide class=md-nav__link> <span class=md-ellipsis> Use it with the IDE </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#usage class=md-nav__link> <span class=md-ellipsis> Usage </span> </a> <nav class=md-nav aria-label=Usage> <ul class=md-nav__list> <li class=md-nav__item> <a href=#initialize-a-project class=md-nav__link> <span class=md-ellipsis> Initialize a project </span> </a> <nav class=md-nav aria-label="Initialize a project"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#import-project-metadata-from-existing-project-files class=md-nav__link> <span class=md-ellipsis> Import project metadata from existing project files </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#adding-dependencies class=md-nav__link> <span class=md-ellipsis> Adding dependencies </span> </a> <nav class=md-nav aria-label="Adding dependencies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#add-local-dependencies class=md-nav__link> <span class=md-ellipsis> Add local dependencies </span> </a> <nav class=md-nav aria-label="Add local dependencies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#add-development-only-dependencies class=md-nav__link> <span class=md-ellipsis> Add development only dependencies </span> </a> </li> <li class=md-nav__item> <a href=#save-version-specifiers class=md-nav__link> <span class=md-ellipsis> Save version specifiers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#supporting-pre-releases class=md-nav__link> <span class=md-ellipsis> Supporting pre-releases </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#update-existing-dependencies class=md-nav__link> <span class=md-ellipsis> Update existing dependencies </span> </a> <nav class=md-nav aria-label="Update existing dependencies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#about-update-strategy class=md-nav__link> <span class=md-ellipsis> About update strategy </span> </a> </li> <li class=md-nav__item> <a href=#update-packages-to-the-versions-that-break-the-version-specifiers class=md-nav__link> <span class=md-ellipsis> Update packages to the versions that break the version specifiers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#remove-existing-dependencies class=md-nav__link> <span class=md-ellipsis> Remove existing dependencies </span> </a> </li> <li class=md-nav__item> <a href=#install-the-packages-pinned-in-lock-file class=md-nav__link> <span class=md-ellipsis> Install the packages pinned in lock file </span> </a> </li> <li class=md-nav__item> <a href=#show-what-packages-are-installed class=md-nav__link> <span class=md-ellipsis> Show what packages are installed </span> </a> </li> <li class=md-nav__item> <a href=#solve-the-locking-failure class=md-nav__link> <span class=md-ellipsis> Solve the locking failure </span> </a> </li> <li class=md-nav__item> <a href=#solve-circular-dependencies class=md-nav__link> <span class=md-ellipsis> Solve circular dependencies </span> </a> </li> <li class=md-nav__item> <a href=#building-packages class=md-nav__link> <span class=md-ellipsis> Building packages </span> </a> <nav class=md-nav aria-label="Building packages"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#choose-a-python-interpreter class=md-nav__link> <span class=md-ellipsis> Choose a Python interpreter </span> </a> <nav class=md-nav aria-label="Choose a Python interpreter"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-requires-python-controls-the-project class=md-nav__link> <span class=md-ellipsis> How requires-python controls the project </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#build-distribution-artifacts class=md-nav__link> <span class=md-ellipsis> Build distribution artifacts </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#publishing-artifacts class=md-nav__link> <span class=md-ellipsis> Publishing artifacts </span> </a> </li> <li class=md-nav__item> <a href=#show-the-current-python-environment class=md-nav__link> <span class=md-ellipsis> Show the current Python environment </span> </a> </li> <li class=md-nav__item> <a href=#manage-project-configuration class=md-nav__link> <span class=md-ellipsis> Manage project configuration </span> </a> </li> <li class=md-nav__item> <a href=#run-scripts-in-isolated-environment class=md-nav__link> <span class=md-ellipsis> Run Scripts in Isolated Environment </span> </a> <nav class=md-nav aria-label="Run Scripts in Isolated Environment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#normal-command class=md-nav__link> <span class=md-ellipsis> Normal command </span> </a> </li> <li class=md-nav__item> <a href=#shell-script class=md-nav__link> <span class=md-ellipsis> Shell script </span> </a> </li> <li class=md-nav__item> <a href=#call-a-python-function class=md-nav__link> <span class=md-ellipsis> Call a Python function </span> </a> </li> <li class=md-nav__item> <a href=#environment-variables-support class=md-nav__link> <span class=md-ellipsis> Environment variables support </span> </a> </li> <li class=md-nav__item> <a href=#load-site-packages-in-the-running-environment class=md-nav__link> <span class=md-ellipsis> Load site-packages in the running environment </span> </a> </li> <li class=md-nav__item> <a href=#show-the-list-of-scripts-shortcuts class=md-nav__link> <span class=md-ellipsis> Show the list of scripts shortcuts </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#manage-caches class=md-nav__link> <span class=md-ellipsis> Manage caches </span> </a> </li> <li class=md-nav__item> <a href=#manage-global-dependencies class=md-nav__link> <span class=md-ellipsis> Manage global dependencies </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dependency-specification class=md-nav__link> <span class=md-ellipsis> Dependency specification </span> </a> <nav class=md-nav aria-label="Dependency specification"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#editable-requirement class=md-nav__link> <span class=md-ellipsis> Editable requirement </span> </a> </li> <li class=md-nav__item> <a href=#optional-dependencies class=md-nav__link> <span class=md-ellipsis> Optional dependencies </span> </a> </li> <li class=md-nav__item> <a href=#development-dependencies-groups class=md-nav__link> <span class=md-ellipsis> Development dependencies groups </span> </a> </li> <li class=md-nav__item> <a href=#show-outdated-packages class=md-nav__link> <span class=md-ellipsis> Show outdated packages </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#console-scripts class=md-nav__link> <span class=md-ellipsis> Console scripts </span> </a> </li> <li class=md-nav__item> <a href=#entry-points class=md-nav__link> <span class=md-ellipsis> Entry points </span> </a> </li> <li class=md-nav__item> <a href=#include-and-exclude-package-files class=md-nav__link> <span class=md-ellipsis> Include and exclude package files </span> </a> <nav class=md-nav aria-label="Include and exclude package files"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#default-values-for-includes-and-excludes class=md-nav__link> <span class=md-ellipsis> Default values for includes and excludes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#determine-the-package-version-dynamically class=md-nav__link> <span class=md-ellipsis> Determine the package version dynamically </span> </a> </li> <li class=md-nav__item> <a href=#cache-the-installation-of-wheels class=md-nav__link> <span class=md-ellipsis> Cache the installation of wheels </span> </a> </li> <li class=md-nav__item> <a href=#working-with-a-virtualenv class=md-nav__link> <span class=md-ellipsis> Working with a virtualenv </span> </a> </li> <li class=md-nav__item> <a href=#use-pdm-in-continuous-integration class=md-nav__link> <span class=md-ellipsis> Use PDM in Continuous Integration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#how-does-it-work class=md-nav__link> <span class=md-ellipsis> How does it work </span> </a> <nav class=md-nav aria-label="How does it work"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#why-you-dont-need-to-use-virtualenvs class=md-nav__link> <span class=md-ellipsis> Why you don't need to use virtualenvs </span> </a> <nav class=md-nav aria-label="Why you don't need to use virtualenvs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#problems-of-the-virtualenvs class=md-nav__link> <span class=md-ellipsis> Problems of the virtualenvs </span> </a> </li> <li class=md-nav__item> <a href=#how-we-make-pep-582-packages-available-to-the-python-interpreter class=md-nav__link> <span class=md-ellipsis> How we make PEP 582 packages available to the Python interpreter </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#plugins class=md-nav__link> <span class=md-ellipsis> Plugins </span> </a> </li> <li class=md-nav__item> <a href=#issues class=md-nav__link> <span class=md-ellipsis> Issues </span> </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> <span class=md-ellipsis> References </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>PDM</h1> <p><a href=https://pdm.fming.dev/ >PDM</a> is a modern Python package manager with <a href=https://www.python.org/dev/peps/pep-0582/ >PEP 582</a> support. It installs and manages packages in a similar way to npm that doesn't need to create a virtualenv at all!</p> <h2 id=features><a href=https://pdm.fming.dev/#feature-highlights>Features</a><a class=headerlink href=#features title="Permanent link">⚑</a></h2> <ul> <li>PEP 582 local package installer and runner, no virtualenv involved at all.</li> <li>Simple and relatively fast dependency resolver, mainly for large binary distributions.</li> <li>A PEP 517 build backend.</li> <li>PEP 621 project metadata.</li> </ul> <h2 id=installation><a href=https://pdm.fming.dev/#installation>Installation</a><a class=headerlink href=#installation title="Permanent link">⚑</a></h2> <h3 id=recommended-installation-method><a href=https://pdm.fming.dev/#recommended-installation-method>Recommended installation method</a><a class=headerlink href=#recommended-installation-method title="Permanent link">⚑</a></h3> <div class=highlight><pre><span></span><code>curl<span class=w> </span>-sSL<span class=w> </span>https://raw.githubusercontent.com/pdm-project/pdm/main/install-pdm.py<span class=w> </span><span class=p>|</span><span class=w> </span>python3<span class=w> </span>-
</code></pre></div> <p>For security reasons, you should verify the checksum. The sha256 checksum is: <code>70ac95c53830ff41d700051c9caebd83b2b85b5d6066e8f853006f9f07293ff0</code>, if it doesn't match <a href=https://pdm.fming.dev/#recommended-installation-method>check if there is a newer version</a>.</p> <h3 id=other-methods>Other methods<a class=headerlink href=#other-methods title="Permanent link">⚑</a></h3> <div class=highlight><pre><span></span><code>pip<span class=w> </span>install<span class=w> </span>--user<span class=w> </span>pdm
</code></pre></div> <h3 id=enable-pep-582-globally><a href=https://pdm.fming.dev/#enable-pep-582-globally>Enable PEP 582 globally</a><a class=headerlink href=#enable-pep-582-globally title="Permanent link">⚑</a></h3> <p>To make the Python interpreters aware of PEP 582 packages, one need to add the <code>pdm/pep582/sitecustomize.py</code> to the Python library search path.</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>--pep582<span class=w> </span>zsh<span class=w> </span>&gt;&gt;<span class=w> </span>~/.zshrc
</code></pre></div> <h3 id=use-it-with-the-ide><a href=https://pdm.fming.dev/#use-with-ide>Use it with the IDE</a><a class=headerlink href=#use-it-with-the-ide title="Permanent link">⚑</a></h3> <p>Now there are not built-in support or plugins for PEP 582 in most IDEs, you have to configure your tools manually. They say how to configure Pycharm and VSCode, but there's <a href=https://github.com/pdm-project/pdm/issues/804>still no instructions for vim</a>.</p> <p>PDM will write and store project-wide configurations in <code>.pdm.toml</code> and you are recommended to add following lines in the <code>.gitignore</code>:</p> <div class=highlight><pre><span></span><code>.pdm.toml
__pypackages__/
</code></pre></div> <h2 id=usage><a href=https://pdm.fming.dev/usage/dependency/ >Usage</a><a class=headerlink href=#usage title="Permanent link">⚑</a></h2> <p>PDM provides a bunch of handful commands to help manage your project and dependencies.</p> <h3 id=initialize-a-project><a href=https://pdm.fming.dev/usage/dependency/#initialize-a-project>Initialize a project</a><a class=headerlink href=#initialize-a-project title="Permanent link">⚑</a></h3> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>init
</code></pre></div> <p>Answer several questions asked by PDM and a <code>pyproject.toml</code> will be created for you in the project root:</p> <div class=highlight><pre><span></span><code><span class=k>[project]</span>
<span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;pdm-test&quot;</span>
<span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;0.0.0&quot;</span>
<span class=n>description</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;&quot;</span>
<span class=n>requires-python</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;&gt;=3.7&quot;</span>
<span class=n>dependencies</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[]</span>
<span class=k>[[project.authors]]</span>
<span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;Frost Ming&quot;</span>
<span class=n>email</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;mianghong@gmail.com&quot;</span>

<span class=k>[project.license]</span>
<span class=n>text</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;MIT&quot;</span>
</code></pre></div> <p>If <code>pyproject.toml</code> is already present, it will be updated with the metadata following the <a href=https://www.python.org/dev/peps/pep-0621/ >PEP 621</a> specification.</p> <h4 id=import-project-metadata-from-existing-project-files><a href=https://pdm.fming.dev/usage/project/#import-project-metadata-from-existing-project-files>Import project metadata from existing project files</a><a class=headerlink href=#import-project-metadata-from-existing-project-files title="Permanent link">⚑</a></h4> <p>If you are already other package manager tools like <code>Pipenv</code> or <code>Poetry</code>, it is easy to migrate to PDM. PDM provides <code>import</code> command so that you don't have to initialize the project manually, it now supports:</p> <ol> <li>Pipenv's <code>Pipfile</code></li> <li>Poetry's section in <code>pyproject.toml</code></li> <li>Flit's section in <code>pyproject.toml</code></li> <li><code>requirements.txt</code> format used by Pip</li> </ol> <p>Also, when you are executing <code>pdm init</code> or <code>pdm install</code>, PDM can auto-detect possible files to import if your PDM project has not been initialized yet.</p> <h3 id=adding-dependencies><a href=https://pdm.fming.dev/usage/dependency/#add-dependencies>Adding dependencies</a><a class=headerlink href=#adding-dependencies title="Permanent link">⚑</a></h3> <p><code>pdm add</code> can be followed by one or several dependencies, and the dependency specification is described in <a href=https://www.python.org/dev/peps/pep-0508/ >PEP 508</a>, you have a summary of the possibilities <a href=#dependency-specification>here</a>.</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>add<span class=w> </span>requests
</code></pre></div> <p>PDM also allows extra dependency groups by providing <code>-G/--group &lt;name&gt;</code> option, and those dependencies will go to <code>[project.optional-dependencies.&lt;name&gt;]</code> table in the project file, respectively.</p> <p>After that, dependencies and sub-dependencies will be resolved properly and installed for you, you can view <code>pdm.lock</code> to see the resolved result of all dependencies.</p> <h4 id=add-local-dependencies><a href=https://pdm.fming.dev/usage/dependency/#add-local-dependencies>Add local dependencies</a><a class=headerlink href=#add-local-dependencies title="Permanent link">⚑</a></h4> <p>Local packages can be added with their paths:</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>add<span class=w> </span>./sub-package
</code></pre></div> <p>Local packages can be installed in editable mode (just like <code>pip install -e &lt;local project path&gt;</code> would) using <code>pdm add -e/--editable &lt;local project path&gt;</code>.</p> <h5 id=add-development-only-dependencies><a href=https://pdm.fming.dev/usage/dependency/#add-development-only-dependencies>Add development only dependencies</a><a class=headerlink href=#add-development-only-dependencies title="Permanent link">⚑</a></h5> <p>PDM also supports defining groups of dependencies that are useful for development, e.g. some for testing and others for linting. We usually don't want these dependencies appear in the distribution's metadata so using optional-dependencies is probably not a good idea. We can define them as development dependencies:</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>add<span class=w> </span>-d<span class=w> </span>pytest
</code></pre></div> <p>This will result in a <code>pyproject.toml</code> as following:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.dev-dependencies]</span>
<span class=n>test</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;pytest&quot;</span><span class=p>,]</span>
</code></pre></div> <h5 id=save-version-specifiers><a href=https://pdm.fming.dev/usage/dependency/#save-version-specifiers>Save version specifiers</a><a class=headerlink href=#save-version-specifiers title="Permanent link">⚑</a></h5> <p>If the package is given without a version specifier like <code>pdm add requests</code>. PDM provides three different behaviors of what version specifier is saved for the dependency, which is given by <code>--save-&lt;strategy&gt;</code>(Assume <code>2.21.0</code> is the latest version that can be found for the dependency):</p> <ul> <li><code>minimum</code>: Save the minimum version specifier: <code>&gt;=2.21.0</code> (default).</li> <li><code>compatible</code>: Save the compatible version specifier: <code>&gt;=2.21.0,&lt;3.0.0</code>(default).</li> <li><code>exact</code>: Save the exact version specifier: <code>==2.21.0</code>.</li> <li><code>wildcard</code>: Don't constrain version and leave the specifier to be wildcard: <code>*</code>.</li> </ul> <h4 id=supporting-pre-releases><a href=https://pdm.fming.dev/latest/pyproject/tool-pdm/#allow-prereleases-in-resolution-result>Supporting pre-releases</a><a class=headerlink href=#supporting-pre-releases title="Permanent link">⚑</a></h4> <p>To help package maintainers, you can allow pre-releases to be validate candidates, that way you'll get the issues sooner. It will mean more time to maintain the broken CIs if you update your packages daily (as you should!), but it's the least you can do to help your downstream library maintainers</p> <p>By default, <code>pdm</code>'s dependency resolver will ignore prereleases unless there are no stable versions for the given version range of a dependency. This behavior can be changed by setting allow_prereleases to true in <code>[tool.pdm]</code> table:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm]</span>
<span class=n>allow_prereleases</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
</code></pre></div> <h3 id=update-existing-dependencies><a href=https://pdm.fming.dev/usage/dependency/#update-existing-dependencies>Update existing dependencies</a><a class=headerlink href=#update-existing-dependencies title="Permanent link">⚑</a></h3> <p>To update all dependencies in the lock file use:</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>update
</code></pre></div> <p>To update the specified package(s):</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>update<span class=w> </span>requests
</code></pre></div> <p>To update multiple groups of dependencies:</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>update<span class=w> </span>-G<span class=w> </span>security<span class=w> </span>-G<span class=w> </span>http
</code></pre></div> <p>To update a given package in the specified group:</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>update<span class=w> </span>-G<span class=w> </span>security<span class=w> </span>cryptography
</code></pre></div> <p>If the group is not given, PDM will search for the requirement in the default dependencies set and raises an error if none is found.</p> <p>To update packages in development dependencies:</p> <div class=highlight><pre><span></span><code><span class=c1># Update all default + dev-dependencies</span>
pdm<span class=w> </span>update<span class=w> </span>-d
<span class=c1># Update a package in the specified group of dev-dependencies</span>
pdm<span class=w> </span>update<span class=w> </span>-dG<span class=w> </span><span class=nb>test</span><span class=w> </span>pytest
</code></pre></div> <p>Keep in mind that <code>pdm update</code> <a href=https://github.com/pdm-project/pdm/issues/884>doesn't touch the constrains in <code>pyproject.toml</code></a>, if you want to update them you'd need to use the <code>--unconstrained</code> flag which will ignore all the constrains of downstream packages and update them to the latest version setting the pin accordingly to your <a href=#about-update-strategy>update strategy</a>.</p> <p>Updating the <code>pyproject.toml</code> constrains to match the <code>pdm.lock</code> as close as possible makes sense to avoid unexpected errors when users use other version of the libraries, as the tests are run only against the versions specified in <code>pdm.lock</code>.</p> <h4 id=about-update-strategy><a href=https://pdm.fming.dev/usage/dependency/#about-update-strategy>About update strategy</a><a class=headerlink href=#about-update-strategy title="Permanent link">⚑</a></h4> <p>Similarly, PDM also provides 2 different behaviors of updating dependencies and sub-dependencies， which is given by <code>--update-&lt;strategy&gt;</code> option:</p> <ul> <li><code>reuse</code>: Keep all locked dependencies except for those given in the command line (default).</li> <li><code>eager</code>: Try to lock a newer version of the packages in command line and their recursive sub-dependencies and keep other dependencies as they are.</li> </ul> <h4 id=update-packages-to-the-versions-that-break-the-version-specifiers><a href=https://pdm.fming.dev/usage/dependency/#update-packages-to-the-versions-that-break-the-version-specifiers>Update packages to the versions that break the version specifiers</a><a class=headerlink href=#update-packages-to-the-versions-that-break-the-version-specifiers title="Permanent link">⚑</a></h4> <p>One can give <code>-u/--unconstrained</code> to tell PDM to ignore the version specifiers in the <code>pyproject.toml</code>. This works similarly to the <code>yarn upgrade -L/--latest</code> command. Besides, <code>pdm update</code> also supports the <code>--pre/--prerelease</code> option.</p> <h3 id=remove-existing-dependencies><a href=https://pdm.fming.dev/usage/dependency/#remove-existing-dependencies>Remove existing dependencies</a><a class=headerlink href=#remove-existing-dependencies title="Permanent link">⚑</a></h3> <p>To remove existing dependencies from project file and the library directory:</p> <div class=highlight><pre><span></span><code><span class=gp># </span>Remove<span class=w> </span>requests<span class=w> </span>from<span class=w> </span>the<span class=w> </span>default<span class=w> </span>dependencies
<span class=go>pdm remove requests</span>
<span class=gp># </span>Remove<span class=w> </span>h11<span class=w> </span>from<span class=w> </span>the<span class=w> </span><span class=s1>&#39;web&#39;</span><span class=w> </span>group<span class=w> </span>of<span class=w> </span>optional-dependencies
<span class=go>pdm remove -G web h11</span>
<span class=gp># </span>Remove<span class=w> </span>pytest-cov<span class=w> </span>from<span class=w> </span>the<span class=w> </span><span class=sb>`</span><span class=nb>test</span><span class=sb>`</span><span class=w> </span>group<span class=w> </span>of<span class=w> </span>dev-dependencies
<span class=go>pdm remove -d pytest-cov</span>
</code></pre></div> <h3 id=install-the-packages-pinned-in-lock-file><a href=https://pdm.fming.dev/usage/dependency/#install-the-packages-pinned-in-lock-file>Install the packages pinned in lock file</a><a class=headerlink href=#install-the-packages-pinned-in-lock-file title="Permanent link">⚑</a></h3> <p>There are two similar commands to do this job with a slight difference:</p> <ul> <li><code>pdm install</code> will check the lock file and relock if it mismatches with project file, then install.</li> <li><code>pdm sync</code> installs dependencies in the lock file and will error out if it doesn't exist. Besides, <code>pdm sync</code> can also remove unneeded packages if <code>--clean</code> option is given.</li> </ul> <p><strong>All</strong> development dependencies are included as long as <code>--prod</code> is not passed and <code>-G</code> doesn't specify any dev groups.</p> <p>Besides, if you don't want the root project to be installed, add <code>--no-self</code> option, and <code>--no-editable</code> can be used when you want all packages to be installed in non-editable versions. With <code>--no-editable</code> turn on, you can safely archive the whole <code>__pypackages__</code> and copy it to the target environment for deployment.</p> <h3 id=show-what-packages-are-installed><a href=https://pdm.fming.dev/usage/dependency/#show-what-packages-are-installed>Show what packages are installed</a><a class=headerlink href=#show-what-packages-are-installed title="Permanent link">⚑</a></h3> <p>Similar to <code>pip list</code>, you can list all packages installed in the packages directory:</p> <div class=highlight><pre><span></span><code><span class=go>pdm list</span>
</code></pre></div> <p>Or show a dependency graph by:</p> <div class=highlight><pre><span></span><code>$ pdm list --graph
tempenv 0.0.0
└── click 7.0 [ required: &lt;7.0.0,&gt;=6.7 ]
black 19.10b0
├── appdirs 1.4.3 [ required: Any ]
├── attrs 19.3.0 [ required: &gt;=18.1.0 ]
├── click 7.0 [ required: &gt;=6.5 ]
├── pathspec 0.7.0 [ required: &lt;1,&gt;=0.6 ]
├── regex 2020.2.20 [ required: Any ]
├── toml 0.10.0 [ required: &gt;=0.9.4 ]
└── typed-ast 1.4.1 [ required: &gt;=1.4.0 ]
bump2version 1.0.0
</code></pre></div> <h3 id=solve-the-locking-failure><a href=https://pdm.fming.dev/usage/dependency/#solve-the-locking-failure>Solve the locking failure</a><a class=headerlink href=#solve-the-locking-failure title="Permanent link">⚑</a></h3> <p>If PDM is not able to find a resolution to satisfy the requirements, it will raise an error. For example,</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span><span class=nv>django</span><span class=o>==</span><span class=m>3</span>.1.4<span class=w> </span><span class=s2>&quot;asgiref&lt;3&quot;</span>
...
🔒<span class=w> </span>Lock<span class=w> </span>failed
Unable<span class=w> </span>to<span class=w> </span>find<span class=w> </span>a<span class=w> </span>resolution<span class=w> </span><span class=k>for</span><span class=w> </span>asgiref<span class=w> </span>because<span class=w> </span>of<span class=w> </span>the<span class=w> </span>following<span class=w> </span>conflicts:
asgiref&lt;<span class=m>3</span><span class=w> </span><span class=o>(</span>from<span class=w> </span>project<span class=o>)</span>
asgiref&lt;<span class=m>4</span>,&gt;<span class=o>=</span><span class=m>3</span>.2.10<span class=w> </span><span class=o>(</span>from<span class=w> </span>&lt;Candidate<span class=w> </span>django<span class=w> </span><span class=m>3</span>.1.4<span class=w> </span>from<span class=w> </span>https://pypi.org/simple/django/&gt;<span class=o>)</span>
To<span class=w> </span>fix<span class=w> </span>this,<span class=w> </span>you<span class=w> </span>could<span class=w> </span>loosen<span class=w> </span>the<span class=w> </span>dependency<span class=w> </span>version<span class=w> </span>constraints<span class=w> </span><span class=k>in</span><span class=w> </span>pyproject.toml.<span class=w> </span>If<span class=w> </span>that<span class=w> </span>is<span class=w> </span>not<span class=w> </span>possible,<span class=w> </span>you<span class=w> </span>could<span class=w> </span>also<span class=w> </span>override<span class=w> </span>the<span class=w> </span>resolved<span class=w> </span>version<span class=w> </span><span class=k>in</span><span class=w> </span><span class=o>[</span>tool.pdm.overrides<span class=o>]</span><span class=w> </span>table.
</code></pre></div> <p>You can either change to a lower version of <code>django</code> or remove the upper bound of <code>asgiref</code>. But if it is not eligible for your project, you can tell PDM to forcely resolve <code>asgiref</code> to a specific version by adding the following lines to <code>pyproject.toml</code>:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.overrides]</span>
<span class=n>asgiref</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;&gt;=3.2.10&quot;</span>
</code></pre></div> <p>Each entry of that table is a package name with the wanted version. The value can also be a URL to a file or a VCS repository like <code>git+https://...</code>. On reading this, PDM will pin <code>asgiref@3.2.10</code> or the greater version in the lock file no matter whether there is any other resolution available.</p> <p>Note: By using <code>[tool.pdm.overrides]</code> setting, you are at your own risk of any incompatibilities from that resolution. It can only be used if there is no valid resolution for your requirements and you know the specific version works. Most of the time, you can just add any transient constraints to the <code>dependencies</code> array.</p> <h3 id=solve-circular-dependencies><a href=https://pdm.fming.dev/usage/dependency/#solve-the-locking-failure>Solve circular dependencies</a><a class=headerlink href=#solve-circular-dependencies title="Permanent link">⚑</a></h3> <p>Sometimes <code>pdm</code> is not able to <a href=https://github.com/pdm-project/pdm/issues/1354>locate the best package combination</a>, or it does too many loops, so to help it you can update your version constrains so that it has the minimum number of candidates.</p> <p>To solve circular dependencies we first need to locate what are the conflicting packages, <a href=https://github.com/pdm-project/pdm/issues/1354><code>pdm</code> doesn't make it easy to detect them</a>. To do that first try to update each of your groups independently with <code>pdm update -G group_name</code>. If that doesn't work remove from your <code>pyproject.toml</code> groups of dependencies until the command works and add back one group by group until you detect the ones that fail.</p> <p>Also it's useful to reduce the number of possibilities of versions of each dependency to make things easier to <code>pdm</code>. Locate all the outdated packages by doing <code>pdm show</code> on each package until <a href=https://github.com/pdm-project/pdm/issues/1356>this issue is solved</a> and run <code>pdm update {package} --unconstrained</code> for each of them. If you're already on the latest version, update your <code>pyproject.toml</code> to match the latest state.</p> <p>Once you have everything to the latest compatible version, you can try to upgrade the rest of the packages one by one to the latest with <code>--unconstrained</code>.</p> <p>In the process of doing these steps you'll see some conflicts in the dependencies that can be manually solved by preventing those versions to be installed or maybe changing the <code>python-requires</code>, although this should be done as the last resource.</p> <p>It also helps to run <code>pdm update</code> with the <code>-v</code> flag, that way you see which are the candidates that are rejected, and you can put the constrain you want. For example, I was seeing the next traceback:</p> <div class=highlight><pre><span></span><code>pdm.termui: Conflicts detected:
  pyflakes&gt;=3.0.0 (from &lt;Candidate autoflake 2.0.0 from https://pypi.org/simple/autoflake/&gt;)
  pyflakes&lt;2.5.0,&gt;=2.4.0 (from &lt;Candidate flake8 4.0.1 from unknown&gt;)
</code></pre></div> <p>So I added a new dependency to pin it:</p> <div class=highlight><pre><span></span><code>[tool.pdm.dev-dependencies]
# The next ones are required to manually solve the dependencies issues
dependencies = [
    # Until flakeheaven supports flake8 5.x
    # https://github.com/flakeheaven/flakeheaven/issues/132
    &quot;flake8&gt;=4.0.1,&lt;5.0.0&quot;,
    &quot;pyflakes&lt;2.5.0&quot;,
]
</code></pre></div> <p>If none of the above works, you can override them:</p> <div class=highlight><pre><span></span><code>[tool.pdm.overrides]
# To be removed once https://github.com/flakeheaven/flakeheaven/issues/132 is solved
&quot;importlib-metadata&quot; = &quot;&gt;=3.10&quot;
</code></pre></div> <p>If you get lost in understanding your dependencies, you can try using <a href=https://github.com/thebjorn/pydeps><code>pydeps</code></a> to get your head around it.</p> <h3 id=building-packages><a href=https://pdm.fming.dev/usage/project/ >Building packages</a><a class=headerlink href=#building-packages title="Permanent link">⚑</a></h3> <p>PDM can act as a PEP 517 build backend, to enable that, write the following lines in your <code>pyproject.toml</code>.</p> <div class=highlight><pre><span></span><code><span class=k>[build-system]</span>
<span class=n>requires</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;pdm-pep517&quot;</span><span class=p>,]</span>
<span class=n>build-backend</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;pdm.pep517.api&quot;</span>
</code></pre></div> <p><code>pip</code> will read the backend settings to install or build a package.</p> <h4 id=choose-a-python-interpreter><a href=https://pdm.fming.dev/usage/project/#choose-a-python-interpreter>Choose a Python interpreter</a><a class=headerlink href=#choose-a-python-interpreter title="Permanent link">⚑</a></h4> <p>If you have used <code>pdm init</code>, you must have already seen how PDM detects and selects the Python interpreter. After initialized, you can also change the settings by <code>pdm use &lt;python_version_or_path&gt;</code>. The argument can be either a version specifier of any length, or a relative or absolute path to the python interpreter, but remember the Python interpreter must conform with the <code>python_requires</code> constraint in the project file.</p> <h5 id=how-requires-python-controls-the-project><a href=https://pdm.fming.dev/usage/project/#how-requires-python-controls-the-project>How <code>requires-python</code> controls the project</a><a class=headerlink href=#how-requires-python-controls-the-project title="Permanent link">⚑</a></h5> <p>PDM respects the value of <code>requires-python</code> in the way that it tries to pick package candidates that can work on all python versions that <code>requires-python</code> contains. For example, if <code>requires-python</code> is <code>&gt;=2.7</code>, PDM will try to find the latest version of <code>foo</code>, whose <code>requires-python</code> version range is a <strong>superset</strong> of <code>&gt;=2.7</code>.</p> <p>So, make sure you write <code>requires-python</code> properly if you don't want any outdated packages to be locked.</p> <h4 id=build-distribution-artifacts><a href=https://pdm.fming.dev/usage/project/#build-distribution-artifacts>Build distribution artifacts</a><a class=headerlink href=#build-distribution-artifacts title="Permanent link">⚑</a></h4> <div class=highlight><pre><span></span><code><span class=gp>$ </span>pdm<span class=w> </span>build
<span class=go>- Building sdist...</span>
<span class=go>- Built pdm-test-0.0.0.tar.gz</span>
<span class=go>- Building wheel...</span>
<span class=go>- Built pdm_test-0.0.0-py3-none-any.whl</span>
</code></pre></div> <h3 id=publishing-artifacts><a href=https://github.com/branchvincent/pdm-publish>Publishing artifacts</a><a class=headerlink href=#publishing-artifacts title="Permanent link">⚑</a></h3> <p>The artifacts can then be uploaded to PyPI by <a href=https://pypi.org/project/twine>twine</a> or through the <code>pdm-publish</code> plugin. The main developer <a href=https://github.com/pdm-project/pdm/issues/22>didn't thought</a> it was worth it, so branchvincent made the plugin (I love this possibility).</p> <p>Install it with <code>pdm plugin add pdm-publish</code>.</p> <p>Then you can upload them with;</p> <div class=highlight><pre><span></span><code><span class=c1># Using token auth</span>
pdm<span class=w> </span>publish<span class=w> </span>--password<span class=w> </span>token
<span class=c1># To test PyPI using basic auth</span>
pdm<span class=w> </span>publish<span class=w> </span>-r<span class=w> </span>testpypi<span class=w> </span>-u<span class=w> </span>username<span class=w> </span>-P<span class=w> </span>password
<span class=c1># To custom index</span>
pdm<span class=w> </span>publish<span class=w> </span>-r<span class=w> </span>https://custom.index.com/
</code></pre></div> <p>If you don't want to use your credentials in plaintext on the command, you can use the environmental variables <code>PDM_PUBLISH_PASSWORD</code> and <code>PDM_PUBLISH_USER</code>.</p> <h3 id=show-the-current-python-environment><a href=https://pdm.fming.dev/usage/project/#show-the-current-python-environment>Show the current Python environment</a><a class=headerlink href=#show-the-current-python-environment title="Permanent link">⚑</a></h3> <div class=highlight><pre><span></span><code><span class=gp>$ </span>pdm<span class=w> </span>info
<span class=go>PDM version:        1.11.3</span>
<span class=go>Python Interpreter: /usr/local/bin/python3.9 (3.9)</span>
<span class=go>Project Root:       /tmp/tmp.dBlK2rAn2x</span>
<span class=go>Project Packages:   /tmp/tmp.dBlK2rAn2x/__pypackages__/3.9</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=gp>$ </span>pdm<span class=w> </span>info<span class=w> </span>--env
<span class=go>{</span>
<span class=go>  &quot;implementation_name&quot;: &quot;cpython&quot;,</span>
<span class=go>  &quot;implementation_version&quot;: &quot;3.9.8&quot;,</span>
<span class=go>  &quot;os_name&quot;: &quot;posix&quot;,</span>
<span class=go>  &quot;platform_machine&quot;: &quot;x86_64&quot;,</span>
<span class=go>  &quot;platform_release&quot;: &quot;4.19.0-5-amd64&quot;,</span>
<span class=go>  &quot;platform_system&quot;: &quot;Linux&quot;,</span>
<span class=go>  &quot;platform_version&quot;: &quot;#1 SMP Debian 4.19.37-5+deb10u1 (2019-07-19)&quot;,</span>
<span class=go>  &quot;python_full_version&quot;: &quot;3.9.8&quot;,</span>
<span class=go>  &quot;platform_python_implementation&quot;: &quot;CPython&quot;,</span>
<span class=go>  &quot;python_version&quot;: &quot;3.9&quot;,</span>
<span class=go>  &quot;sys_platform&quot;: &quot;linux&quot;</span>
<span class=go>}</span>
</code></pre></div> <h3 id=manage-project-configuration><a href=https://pdm.fming.dev/usage/project/#configure-the-project>Manage project configuration</a><a class=headerlink href=#manage-project-configuration title="Permanent link">⚑</a></h3> <p>Show the current configurations:</p> <div class=highlight><pre><span></span><code><span class=go>pdm config</span>
</code></pre></div> <p>Get one single configuration:</p> <div class=highlight><pre><span></span><code><span class=go>pdm config pypi.url</span>
</code></pre></div> <p>Change a configuration value and store in home configuration:</p> <div class=highlight><pre><span></span><code><span class=go>pdm config pypi.url &quot;https://test.pypi.org/simple&quot;</span>
</code></pre></div> <p>By default, the configuration are changed globally, if you want to make the config seen by this project only, add a <code>--local</code> flag:</p> <div class=highlight><pre><span></span><code><span class=go>pdm config --local pypi.url &quot;https://test.pypi.org/simple&quot;</span>
</code></pre></div> <p>Any local configurations will be stored in <code>.pdm.toml</code> under the project root directory.</p> <p>The configuration files are searched in the following order:</p> <ol> <li><code>&lt;PROJECT_ROOT&gt;/.pdm.toml</code> - The project configuration.</li> <li><code>~/.pdm/config.toml</code> - The home configuration.</li> </ol> <p>If <code>-g/--global</code> option is used, the first item will be replaced by <code>~/.pdm/global-project/.pdm.toml</code>.</p> <p>You can find all available configuration items in <a href=#configuration>Configuration Page</a>.</p> <h3 id=run-scripts-in-isolated-environment><a href=https://pdm.fming.dev/usage/project/#run-scripts-in-isolated-environment>Run Scripts in Isolated Environment</a><a class=headerlink href=#run-scripts-in-isolated-environment title="Permanent link">⚑</a></h3> <p>With PDM, you can run arbitrary scripts or commands with local packages loaded:</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>run<span class=w> </span>flask<span class=w> </span>run<span class=w> </span>-p<span class=w> </span><span class=m>54321</span>
</code></pre></div> <p>PDM also supports custom script shortcuts in the optional <code>[tool.pdm.scripts]</code> section of <code>pyproject.toml</code>.</p> <p>You can then run <code>pdm run &lt;shortcut_name&gt;</code> to invoke the script in the context of your PDM project. For example:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.scripts]</span>
<span class=n>start_server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;flask run -p 54321&quot;</span>
</code></pre></div> <p>And then in your terminal:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>pdm<span class=w> </span>run<span class=w> </span>start_server
Flask<span class=w> </span>server<span class=w> </span>started<span class=w> </span>at<span class=w> </span>http://127.0.0.1:54321
</code></pre></div> <p>Any extra arguments will be appended to the command:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>pdm<span class=w> </span>run<span class=w> </span>start_server<span class=w> </span>-h<span class=w> </span><span class=m>0</span>.0.0.0
Flask<span class=w> </span>server<span class=w> </span>started<span class=w> </span>at<span class=w> </span>http://0.0.0.0:54321
</code></pre></div> <p>PDM supports 3 types of scripts:</p> <h4 id=normal-command><a href=https://pdm.fming.dev/usage/project/#normal-command>Normal command</a><a class=headerlink href=#normal-command title="Permanent link">⚑</a></h4> <p>Plain text scripts are regarded as normal command, or you can explicitly specify it:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.scripts.start_server]</span>
<span class=n>cmd</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;flask run -p 54321&quot;</span>
</code></pre></div> <p>In some cases, such as when wanting to add comments between parameters, it might be more convenient to specify the command as an array instead of a string:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.scripts.start_server]</span>
<span class=n>cmd</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;flask&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;run&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;-p&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;54321&quot;</span><span class=p>,]</span>
</code></pre></div> <h4 id=shell-script><a href=https://pdm.fming.dev/usage/project/#shell-script>Shell script</a><a class=headerlink href=#shell-script title="Permanent link">⚑</a></h4> <p>Shell scripts can be used to run more shell-specific tasks, such as pipeline and output redirecting. This is basically run via <code>subprocess.Popen()</code> with <code>shell=True</code>:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.scripts.filter_error]</span>
<span class=n>shell</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;cat error.log|grep CRITICAL &gt; critical.log&quot;</span>
</code></pre></div> <h4 id=call-a-python-function><a href=https://pdm.fming.dev/usage/project/#call-a-python-function>Call a Python function</a><a class=headerlink href=#call-a-python-function title="Permanent link">⚑</a></h4> <p>The script can be also defined as calling a python function in the form <code>&lt;module_name&gt;:&lt;func_name&gt;</code>:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.scripts.foobar]</span>
<span class=n>call</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;foo_package.bar_module:main&quot;</span>
</code></pre></div> <p>The function can be supplied with literal arguments:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.scripts.foobar]</span>
<span class=n>call</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;foo_package.bar_module:main(&#39;dev&#39;)&quot;</span>
</code></pre></div> <h4 id=environment-variables-support><a href=https://pdm.fming.dev/usage/project/#environment-variables-support>Environment variables support</a><a class=headerlink href=#environment-variables-support title="Permanent link">⚑</a></h4> <p>All environment variables set in the current shell can be seen by <code>pdm run</code> and will be expanded when executed. Besides, you can also define some fixed environment variables in your <code>pyproject.toml</code>:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.scripts.start_server]</span>
<span class=n>cmd</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;flask run -p 54321&quot;</span>

<span class=k>[tool.pdm.scripts.start_server.env]</span>
<span class=n>FOO</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;bar&quot;</span>
<span class=n>FLASK_ENV</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;development&quot;</span>
</code></pre></div> <p>Note how we use <a href=https://github.com/toml-lang/toml>TOML's syntax</a> to define a compound dictionary.</p> <p>A dotenv file is also supported via <code>env_file = "&lt;file_path&gt;"</code> setting.</p> <p>For environment variables and/or dotenv file shared by all scripts, you can define <code>env</code> and <code>env_file</code> settings under a special key named <code>_</code> of <code>tool.pdm.scripts</code> table:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.scripts]</span>
<span class=n>start_server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;flask run -p 54321&quot;</span>
<span class=n>migrate_db</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;flask db upgrade&quot;</span>

<span class=k>[tool.pdm.scripts._]</span>
<span class=n>env_file</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;.env&quot;</span>
</code></pre></div> <p>Besides, PDM also injects the root path of the project via <code>PDM_PROJECT_ROOT</code> environment variable.</p> <h4 id=load-site-packages-in-the-running-environment><a href=https://pdm.fming.dev/usage/project/#load-site-packages-in-the-running-environment>Load site-packages in the running environment</a><a class=headerlink href=#load-site-packages-in-the-running-environment title="Permanent link">⚑</a></h4> <p>To make sure the running environment is properly isolated from the outer Python interpreter, site-packages from the selected interpreter WON'T be loaded into <code>sys.path</code>, unless any of the following conditions holds:</p> <ol> <li>The executable is from <code>PATH</code> but not inside the <code>__pypackages__</code> folder.</li> <li><code>-s/--site-packages</code> flag is following <code>pdm run</code>.</li> <li><code>site_packages = true</code> is in either the script table or the global setting key <code>_</code>.</li> </ol> <p>Note that site-packages will always be loaded if running with PEP 582 enabled(without the <code>pdm run</code> prefix).</p> <h4 id=show-the-list-of-scripts-shortcuts><a href=https://pdm.fming.dev/usage/project/#show-the-list-of-scripts-shortcuts>Show the list of scripts shortcuts</a><a class=headerlink href=#show-the-list-of-scripts-shortcuts title="Permanent link">⚑</a></h4> <p>Use <code>pdm run --list/-l</code> to show the list of available script shortcuts:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>pdm<span class=w> </span>run<span class=w> </span>--list
Name<span class=w>        </span>Type<span class=w>  </span>Script<span class=w>           </span>Description
-----------<span class=w> </span>-----<span class=w> </span>----------------<span class=w> </span>----------------------
test_cmd<span class=w>    </span>cmd<span class=w>   </span>flask<span class=w> </span>db<span class=w> </span>upgrade
test_script<span class=w> </span>call<span class=w>  </span>test_script:main<span class=w> </span>call<span class=w> </span>a<span class=w> </span>python<span class=w> </span><span class=k>function</span>
test_shell<span class=w>  </span>shell<span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=nv>$FOO</span><span class=w>        </span>shell<span class=w> </span><span class=nb>command</span>
</code></pre></div> <p>You can add an <code>help</code> option with the description of the script, and it will be displayed in the <code>Description</code> column in the above output.</p> <h3 id=manage-caches><a href=https://pdm.fming.dev/usage/project/#manage-caches>Manage caches</a><a class=headerlink href=#manage-caches title="Permanent link">⚑</a></h3> <p>PDM provides a convenient command group to manage the cache, there are four kinds of caches:</p> <ul> <li><code>wheels/</code> stores the built results of non-wheel distributions and files.</li> <li><code>http/</code> stores the HTTP response content.</li> <li><code>metadata/</code> stores package metadata retrieved by the resolver.</li> <li><code>hashes/</code> stores the file hashes fetched from the package index or calculated locally.</li> <li><code>packages/</code> The centrialized repository for installed wheels.</li> </ul> <p>See the current cache usage by typing <code>pdm cache info</code>. Besides, you can use <code>add</code>, <code>remove</code> and <code>list</code> subcommands to manage the cache content.</p> <h3 id=manage-global-dependencies><a href=https://pdm.fming.dev/usage/project/#manage-global-project>Manage global dependencies</a><a class=headerlink href=#manage-global-dependencies title="Permanent link">⚑</a></h3> <p>Sometimes users may want to keep track of the dependencies of global Python interpreter as well. It is easy to do so with PDM, via <code>-g/--global</code> option which is supported by most subcommands.</p> <p>If the option is passed, <code>~/.pdm/global-project</code> will be used as the project directory, which is almost the same as normal project except that <code>pyproject.toml</code> will be created automatically for you and it doesn't support build features. The idea is taken from Haskell's <a href=https://docs.haskellstack.org>stack</a>.</p> <p>However, unlike <code>stack</code>, by default, PDM won't use global project automatically if a local project is not found. Users should pass <code>-g/--global</code> explicitly to activate it, since it is not very pleasing if packages go to a wrong place. But PDM also leave the decision to users, just set the config <code>auto_global</code> to <code>true</code>.</p> <p>If you want global project to track another project file other than <code>~/.pdm/global-project</code>, you can provide the project path via <code>-p/--project &lt;path&gt;</code> option.</p> <p>Warning: Be careful with <code>remove</code> and <code>sync --clean</code> commands when global project is used, because it may remove packages installed in your system Python.</p> <h2 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">⚑</a></h2> <p>All available configurations can be seen <a href=https://pdm.fming.dev/configuration/#available-configurations>here</a>.</p> <h3 id=dependency-specification><a href=https://pdm.fming.dev/pyproject/pep621/#dependency-specification>Dependency specification</a><a class=headerlink href=#dependency-specification title="Permanent link">⚑</a></h3> <p>The <code>project.dependencies</code> is an array of dependency specification strings following the <a href=https://www.python.org/dev/peps/pep-0440/ >PEP 440</a> and <a href=https://www.python.org/dev/peps/pep-0508/ >PEP 508</a>.</p> <p>Examples:</p> <div class=highlight><pre><span></span><code><span class=n>dependencies</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;requests&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;flask &gt;= 1.1.0&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;pywin32; sys_platform == &#39;win32&#39;&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;pip @ https://github.com/pypa/pip.git@20.3.1&quot;</span><span class=p>,]</span>
</code></pre></div> <h4 id=editable-requirement><a href=https://pdm.fming.dev/pyproject/pep621/#editable-requirement>Editable requirement</a><a class=headerlink href=#editable-requirement title="Permanent link">⚑</a></h4> <p>Beside of the normal dependency specifications, one can also have some packages installed in editable mode. The editable specification string format is the same as <a href=https://pip.pypa.io/en/stable/cli/pip_install/#editable-installs>Pip's editable install mode</a>.</p> <p>Examples:</p> <div class=highlight><pre><span></span><code>dependencies = [
    ...,
    # Local dependency
    &quot;-e path/to/SomeProject&quot;,
    # Dependency cloned
    &quot;-e git+http://repo/my_project.git#egg=SomeProject&quot;
]
</code></pre></div> <p>Note: About editable installation. One can have editable installation and normal installation for the same package. The one that comes at last wins. However, editable dependencies WON'T be included in the metadata of the built artifacts since they are not valid PEP 508 strings. They only exist for development purpose.</p> <h4 id=optional-dependencies><a href=https://pdm.fming.dev/pyproject/pep621/#optional-dependencies>Optional dependencies</a><a class=headerlink href=#optional-dependencies title="Permanent link">⚑</a></h4> <p>You can have some requirements optional, which is similar to <code>setuptools</code>' <code>extras_require</code> parameter.</p> <div class=highlight><pre><span></span><code><span class=k>[project.optional-dependencies]</span>
<span class=n>socks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;PySocks &gt;= 1.5.6, != 1.5.7, &lt; 2&quot;</span><span class=p>,]</span>
<span class=n>tests</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;ddt &gt;= 1.2.2, &lt; 2&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;pytest &lt; 6&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;mock &gt;= 1.0.1, &lt; 4; python_version &lt; </span><span class=se>\&quot;</span><span class=s2>3.4</span><span class=se>\&quot;</span><span class=s2>&quot;</span><span class=p>,]</span>
</code></pre></div> <p>To install a group of optional dependencies:</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>install<span class=w> </span>-G<span class=w> </span>socks
</code></pre></div> <p><code>-G</code> option can be given multiple times to include more than one group.</p> <h4 id=development-dependencies-groups><a href=https://pdm.fming.dev/pyproject/tool-pdm/#development-dependencies>Development dependencies groups</a><a class=headerlink href=#development-dependencies-groups title="Permanent link">⚑</a></h4> <p>You can have several groups of development only dependencies. Unlike <code>optional-dependencies</code>, they won't appear in the package distribution metadata such as <code>PKG-INFO</code> or <code>METADATA</code>. And the package index won't be aware of these dependencies. The schema is similar to that of <code>optional-dependencies</code>, except that it is in <code>tool.pdm</code> table.</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.dev-dependencies]</span>
<span class=n>lint</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;flake8&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;black&quot;</span><span class=p>,]</span>
<span class=n>test</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;pytest&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;pytest-cov&quot;</span><span class=p>,]</span>
<span class=n>doc</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;mkdocs&quot;</span><span class=p>,]</span>
</code></pre></div> <p>To install all of them:</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>install
</code></pre></div> <p>For more CLI usage, please refer to <a href=/usage/dependency/ >Manage Dependencies</a></p> <h4 id=show-outdated-packages><a href=https://github.com/pdm-project/pdm/issues/358>Show outdated packages</a><a class=headerlink href=#show-outdated-packages title="Permanent link">⚑</a></h4> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>update<span class=w> </span>--dry-run<span class=w> </span>--unconstrained
</code></pre></div> <h3 id=console-scripts><a href=https://pdm.fming.dev/pyproject/pep621/#console-scripts>Console scripts</a><a class=headerlink href=#console-scripts title="Permanent link">⚑</a></h3> <p>The following content:</p> <div class=highlight><pre><span></span><code><span class=k>[project.scripts]</span>
<span class=n>mycli</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;mycli.__main__:main&quot;</span>
</code></pre></div> <p>will be translated to <code>setuptools</code> style:</p> <div class=highlight><pre><span></span><code><span class=n>entry_points</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;console_scripts&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;mycli=mycli.__main__:main&quot;</span><span class=p>]}</span>
</code></pre></div> <p>Also, <code>[project.gui-scripts]</code> will be translated to <code>gui_scripts</code> entry points group in <code>setuptools</code> style.</p> <h3 id=entry-points><a href=https://pdm.fming.dev/pyproject/pep621/#entry-points>Entry points</a><a class=headerlink href=#entry-points title="Permanent link">⚑</a></h3> <p>Other types of entry points are given by <code>[project.entry-points.&lt;type&gt;]</code> section, with the same format of <code>[project.scripts]</code>:</p> <div class=highlight><pre><span></span><code><span class=k>[project.entry-points.pytest11]</span>
<span class=n>myplugin</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;mypackage.plugin:pytest_plugin&quot;</span>
</code></pre></div> <h3 id=include-and-exclude-package-files><a href=https://pdm.fming.dev/pyproject/tool-pdm/#include-and-exclude-package-files>Include and exclude package files</a><a class=headerlink href=#include-and-exclude-package-files title="Permanent link">⚑</a></h3> <p>The way of specifying include and exclude files are simple, they are given as a list of glob patterns:</p> <div class=highlight><pre><span></span><code><span class=n>includes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;**/*.json&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;mypackage/&quot;</span><span class=p>,]</span>
<span class=n>excludes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;mypackage/_temp/*&quot;</span><span class=p>,]</span>
</code></pre></div> <p>In case you want some files to be included in sdist only, you use the <code>source-includes</code> field:</p> <div class=highlight><pre><span></span><code><span class=n>includes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=err>...]</span>
<span class=n>excludes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=err>...]</span>
<span class=n>source-includes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;tests/&quot;</span><span class=p>]</span>
</code></pre></div> <p>Note that the files defined in <code>source-includes</code> will be <strong>excluded</strong> automatically from non-sdist builds.</p> <h4 id=default-values-for-includes-and-excludes><a href=https://pdm.fming.dev/pyproject/tool-pdm/#default-values-for-includes-and-excludes>Default values for includes and excludes</a><a class=headerlink href=#default-values-for-includes-and-excludes title="Permanent link">⚑</a></h4> <p>If you don't specify any of these fields, PDM also provides smart default values to fit the most common workflows.</p> <ul> <li>Top-level packages will be included.</li> <li><code>tests</code> package will be excluded from <strong>non-sdist</strong> builds.</li> <li><code>src</code> directory will be detected as the <code>package-dir</code> if it exists.</li> </ul> <p>If your project follows the above conventions you don't need to config any of these fields and it just works. Be aware PDM won't add <a href=https://www.python.org/dev/peps/pep-0420/ >PEP 420 implicit namespace packages</a> automatically and they should always be specified in <code>includes</code> explicitly.</p> <h3 id=determine-the-package-version-dynamically><a href=https://pdm.fming.dev/pyproject/pep621/#determine-the-package-version-dynamically>Determine the package version dynamically</a><a class=headerlink href=#determine-the-package-version-dynamically title="Permanent link">⚑</a></h3> <p>The package version can be retrieved from the <code>__version__</code> variable of a given file. To do this, put the following under the <code>[tool.pdm]</code> table:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.version]</span>
<span class=n>from</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;mypackage/__init__.py&quot;</span>
</code></pre></div> <p>Remember set <code>dynamic = ["version"]</code> in <code>[project]</code> metadata.</p> <p>PDM can also read version from SCM tags. If you are using <code>git</code> or <code>hg</code> as the version control system, define the <code>version</code> as follows:</p> <div class=highlight><pre><span></span><code><span class=k>[tool.pdm.version]</span>
<span class=n>use_scm</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
</code></pre></div> <p>In either case, you MUST delete the <code>version</code> field from the <code>[project]</code> table, and include <code>version</code> in the <code>dynamic</code> field, or the backend will raise an error:</p> <div class=highlight><pre><span></span><code><span class=n>dynamic</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;version&quot;</span><span class=p>,]</span>
</code></pre></div> <h3 id=cache-the-installation-of-wheels><a href=https://pdm.fming.dev/usage/project/#cache-the-installation-of-wheels>Cache the installation of wheels</a><a class=headerlink href=#cache-the-installation-of-wheels title="Permanent link">⚑</a></h3> <p>If a package is required by many projects on the system, each project has to keep its own copy. This may become a waste of disk space especially for data science and machine learning libraries.</p> <p>PDM supports <em>caching</em> the installations of the same wheel by installing it into a centralized package repository and linking to that installation in different projects. To enabled it, run:</p> <div class=highlight><pre><span></span><code>pdm<span class=w> </span>config<span class=w> </span>feature.install_cache<span class=w> </span>on
</code></pre></div> <p>It can be enabled on a project basis, by adding <code>--local</code> option to the command.</p> <p>The caches are located under <code>$(pdm config cache_dir)/packages</code>. One can view the cache usage by <code>pdm cache info</code>. But be noted the cached installations are managed automatically. They get deleted when not linked from any projects. Manually deleting the caches from the disk may break some projects on the system.</p> <p>Note: Only the installation of <em>named requirements</em> resolved from PyPI can be cached.</p> <h3 id=working-with-a-virtualenv><a href=https://pdm.fming.dev/usage/project/#working-with-a-virtualenv>Working with a virtualenv</a><a class=headerlink href=#working-with-a-virtualenv title="Permanent link">⚑</a></h3> <p>Although PDM enforces PEP 582 by default, it also allows users to install packages into the virtualenv. It is controlled by the configuration item <code>use_venv</code>. When it is set to <code>True</code> (default), PDM will use the virtualenv if:</p> <ul> <li>A virtualenv is already activated.</li> <li>Any of <code>venv</code>, <code>.venv</code>, <code>env</code> is a valid virtualenv folder.</li> </ul> <p>Besides, when <code>use-venv</code> is on and the interpreter path given is a venv-like path, PDM will reuse that venv directory as well.</p> <p>For enhanced virtualenv support such as virtualenv management and auto-creation, please go for <a href=https://github.com/pdm-project/pdm-venv>pdm-venv</a>, which can be installed as a plugin.</p> <h3 id=use-pdm-in-continuous-integration><a href=https://pdm.fming.dev/usage/advanced/#use-pdm-in-continuous-integration>Use PDM in Continuous Integration</a><a class=headerlink href=#use-pdm-in-continuous-integration title="Permanent link">⚑</a></h3> <p>Fortunately, if you are using GitHub Action, there is <a href=https://github.com/marketplace/actions/setup-pdm>pdm-project/setup-pdm</a> to make this process easier. Here is an example workflow of GitHub Actions, while you can adapt it for other CI platforms.</p> <div class=highlight><pre><span></span><code><span class=nt>Testing</span><span class=p>:</span>
<span class=w>  </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.os }}</span>
<span class=w>  </span><span class=nt>strategy</span><span class=p>:</span>
<span class=w>    </span><span class=nt>matrix</span><span class=p>:</span>
<span class=w>      </span><span class=nt>python-version</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>3.7</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>3.8</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>3.9</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>3.10</span><span class="p p-Indicator">]</span>
<span class=w>      </span><span class=nt>os</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>ubuntu-latest</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>macOS-latest</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>windows-latest</span><span class="p p-Indicator">]</span>

<span class=w>  </span><span class=nt>steps</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v1</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Set up PDM</span>
<span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pdm-project/setup-pdm@main</span>
<span class=w>      </span><span class=nt>with</span><span class=p>:</span>
<span class=w>        </span><span class=nt>python-version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.python-version }}</span>

<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span>
<span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<span class=w>        </span><span class=no>pdm sync -d -G testing</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Run Tests</span>
<span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<span class=w>        </span><span class=no>pdm run -v pytest tests</span>
</code></pre></div> <p>Note: Tips for GitHub Action users, there is a <a href=https://github.com/actions/virtual-environments/issues/2803>known compatibility issue</a> on Ubuntu virtual environment. If PDM parallel install is failed on that machine you should either set <code>parallel_install</code> to <code>false</code> or set env <code>LD_PRELOAD=/lib/x86_64-linux-gnu/libgcc_s.so.1</code>. It is already handled by the <code>pdm-project/setup-pdm</code> action.</p> <p>Note: If your CI scripts run without a proper user set, you might get permission errors when PDM tries to create its cache directory. To work around this, you can set the HOME environment variable yourself, to a writable directory, for example:</p> <div class=highlight><pre><span></span><code>```bash
export HOME=/tmp/home
```
</code></pre></div> <h2 id=how-does-it-work>How does it work<a class=headerlink href=#how-does-it-work title="Permanent link">⚑</a></h2> <h3 id=why-you-dont-need-to-use-virtualenvs><a href=https://frostming.com/2021/01-22/introducing-pdm/ >Why you don't need to use virtualenvs</a><a class=headerlink href=#why-you-dont-need-to-use-virtualenvs title="Permanent link">⚑</a></h3> <p>When you develop a Python project, you need to install the project's dependencies. For a long time, tutorials and articles have told you to use a virtual environment to isolate the project's dependencies. This way you don't contaminate the working set of other projects, or the global interpreter, to avoid possible version conflicts.</p> <h4 id=problems-of-the-virtualenvs><a href=https://frostming.com/2021/01-22/introducing-pdm/#the-problems-with-virtual-environments>Problems of the virtualenvs</a><a class=headerlink href=#problems-of-the-virtualenvs title="Permanent link">⚑</a></h4> <p>Virtualenvs are confusing for people that are starting with python. They also use a lot of space, as many virtualenvs have their own copy of the same libraries. They help us isolate project dependencies though, but things get tricky when it comes to nested venvs. One installs the virtualenv manager(like Pipenv or Poetry) using a venv encapsulated Python, and creates more venvs using the tool which is based on an encapsulated Python. One day a minor release of Python is out and one has to check all those venvs and upgrade them if required before they can safely delete the out-dated Python version.</p> <p>Another scenario is global tools. There are many tools that are not tied to any specific virtualenv and are supposed to work with each of them. Examples are profiling tools and third-party REPLs. We also wish them to be installed in their own isolated environments. It's impossible to make them work with virtualenv, even if you have activated the virtualenv of the target project you want to work on because the tool is lying in its own virtualenv and it can only see the libraries installed in it. So we have to install the tool for each project.</p> <p>The solution has been existing for a long time. PEP 582 was originated in 2018 and is still a draft proposal till the time I copied this article.</p> <p>Say you have a project with the following structure:</p> <div class=highlight><pre><span></span><code>.
├── __pypackages__
│   └── 3.8
│       └── lib
└── my_script.py
</code></pre></div> <p>As specified in the PEP 582, if you run <code>python3.8 /path/to/my_script.py</code>, <code>__pypackages__/3.8/lib</code> will be added to <code>sys.path</code>, and the libraries inside will become import-able in <code>my_script.py</code>.</p> <p>Now let's review the two problems mentioned above under PEP 582. For the first problem, the main cause is that the virtual environment is bound to a cloned Python interpreter on which the subsequent library searching based. It takes advantage of Python's existing mechanisms without any other complex changes but makes the entire virtual environment to become unavailable when the Python interpreter is stale. With the local packages directory, you don't have a Python interpreter any more, the library path is directly appended to <code>sys.path</code>, so you can freely move and copy it.</p> <p>For the second, once again, you just call the tool against the project you want to analyze, and the <code>__pypackages__</code> sitting inside the project will be loaded automatically. This way you only need to keep one copy of the global tool and make it work with multiple projects.</p> <p><code>pdm</code> installs dependencies into the local package directory <code>__package__</code> and makes Python interpreters aware of it with <a href=#how-we-make-pep-582-packages-available-to-the-python-interpreter>a very simple setup</a>.</p> <h4 id=how-we-make-pep-582-packages-available-to-the-python-interpreter><a href=https://pdm.fming.dev/usage/project/#how-we-make-pep-582-packages-available-to-the-python-interpreter>How we make PEP 582 packages available to the Python interpreter</a><a class=headerlink href=#how-we-make-pep-582-packages-available-to-the-python-interpreter title="Permanent link">⚑</a></h4> <p>Thanks to the <a href=https://docs.python.org/3/library/site.html>site packages loading</a> on Python startup. It is possible to patch the <code>sys.path</code> by executing the <code>sitecustomize.py</code> shipped with PDM. The interpreter can search the directories for the nearest <code>__pypackage__</code> folder and append it to the <code>sys.path</code> variable.</p> <h2 id=plugins><a href=https://pdm.fming.dev/plugin/write/ >Plugins</a><a class=headerlink href=#plugins title="Permanent link">⚑</a></h2> <p>PDM is aiming at being a community driven package manager. It is shipped with a full-featured plug-in system, with which you can:</p> <ul> <li>Develop a new command for PDM.</li> <li>Add additional options to existing PDM commands.</li> <li>Change PDM's behavior by reading dditional config items.</li> <li>Control the process of dependency resolution or installation.</li> </ul> <p>If you want to write a plugin, start <a href=https://pdm.fming.dev/plugin/write/#write-your-own-plugin>here</a>.</p> <h2 id=issues>Issues<a class=headerlink href=#issues title="Permanent link">⚑</a></h2> <ul> <li>You can't still <a href=https://github.com/pdm-project/pdm/issues/811>run <code>mypy</code> with <code>pdm</code></a> without virtualenvs. pawamoy created a <a href=https://github.com/python/mypy/issues/10633#issuecomment-974840203>patch</a> that is supposed to work, but I'd rather use virtualenvs until it's supported. Once it's supported check the <a href=https://github.com/vim-test/vim-test/issues/606>vim-test</a> issue to see how to integrate it.</li> <li>It's not yet supported by <a href=https://github.com/dependabot/dependabot-core/issues/3190>dependabot</a>. Once supported add it back to the cookiecutter template and spread it.</li> </ul> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">⚑</a></h2> <ul> <li><a href=https://github.com/pdm-project/pdm/ >Git</a></li> <li><a href=https://pdm.fming.dev/ >Docs</a></li> </ul> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2024-08-30T08:35:48+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-08-30</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/benkyonodo target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.instant", "navigation.top", "content.code.annotate", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.8fd75fb4.min.js></script> <script src=../js/timeago.min.js></script> <script src=../js/timeago_mkdocs_material.js></script> </body> </html>