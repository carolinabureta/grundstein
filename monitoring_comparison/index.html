<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content=My><meta name=author content=Lyz><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.11"><title>Monitoring Comparison - The Red Lobster Book</title><link rel=stylesheet href=../assets/stylesheets/main.7e359304.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../css/timeago.css><link rel=stylesheet href=../stylesheets/extra.css><link rel=stylesheet href=../stylesheets/links.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=light-blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#nagios class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> </div> </aside> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="The Red Lobster Book" class="md-header__button md-logo" aria-label="The Red Lobster Book" data-md-component=logo> <img src=../img/logo.bmp alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> The Red Lobster Book </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Monitoring Comparison </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=light-blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue-grey data-md-color-accent=light-blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/realcaptainsolaris/redbook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> realcaptainsolaris/redbook </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="The Red Lobster Book" class="md-nav__button md-logo" aria-label="The Red Lobster Book" data-md-component=logo> <img src=../img/logo.bmp alt=logo> </a> The Red Lobster Book </label> <div class=md-nav__source> <a href=https://github.com/realcaptainsolaris/redbook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> realcaptainsolaris/redbook </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../contact/ class=md-nav__link> <span class=md-ellipsis> Contact </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Uebungen </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Uebungen </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../uebungen/beispiel/ class=md-nav__link> <span class=md-ellipsis> Test1 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#nagios class=md-nav__link> <span class=md-ellipsis> Nagios </span> </a> </li> <li class=md-nav__item> <a href=#prometheus class=md-nav__link> <span class=md-ellipsis> Prometheus </span> </a> </li> <li class=md-nav__item> <a href=#comparison class=md-nav__link> <span class=md-ellipsis> Comparison </span> </a> <nav class=md-nav aria-label=Comparison> <ul class=md-nav__list> <li class=md-nav__item> <a href=#open-source class=md-nav__link> <span class=md-ellipsis> Open source </span> </a> </li> <li class=md-nav__item> <a href=#community class=md-nav__link> <span class=md-ellipsis> Community </span> </a> </li> <li class=md-nav__item> <a href=#configuration-and-usage class=md-nav__link> <span class=md-ellipsis> Configuration and usage </span> </a> </li> <li class=md-nav__item> <a href=#visualizations class=md-nav__link> <span class=md-ellipsis> Visualizations </span> </a> </li> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#kubernetes-integration class=md-nav__link> <span class=md-ellipsis> Kubernetes integration </span> </a> </li> <li class=md-nav__item> <a href=#documentation class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-nav__item> <a href=#integrations class=md-nav__link> <span class=md-ellipsis> Integrations </span> </a> </li> <li class=md-nav__item> <a href=#alerts class=md-nav__link> <span class=md-ellipsis> Alerts </span> </a> </li> <li class=md-nav__item> <a href=#advanced-monitorization class=md-nav__link> <span class=md-ellipsis> Advanced monitorization </span> </a> </li> <li class=md-nav__item> <a href=#data-storage class=md-nav__link> <span class=md-ellipsis> Data storage </span> </a> </li> <li class=md-nav__item> <a href=#high-availability class=md-nav__link> <span class=md-ellipsis> High availability </span> </a> </li> <li class=md-nav__item> <a href=#dynamic-infrastructure class=md-nav__link> <span class=md-ellipsis> Dynamic infrastructure </span> </a> </li> <li class=md-nav__item> <a href=#custom-script-execution class=md-nav__link> <span class=md-ellipsis> Custom script execution </span> </a> </li> <li class=md-nav__item> <a href=#network-monitorization class=md-nav__link> <span class=md-ellipsis> Network monitorization </span> </a> </li> <li class=md-nav__item> <a href=#summary class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> <span class=md-ellipsis> References </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Monitoring Comparison</h1> <p>As with any technology, when you want to adopt it, you first need to analyze your options. In this article we're going to compare the two most popular solutions at the moment, Nagios and Prometheus. Zabbix is similar in architecture and features to Nagios, so for the first iteration we're going to skip it.</p> <div class="admonition note"> <p class=admonition-title>TL;DR: Prometheus is better, but it needs more effort.</p> <p>Nagios is suitable for basic monitoring of small and/or static systems where blackbox probing is sufficient.</p> <p>If you want to do whitebox monitoring, or have a dynamic or cloud based environment, then Prometheus is a good choice.</p> </div> <h2 id=nagios>Nagios<a class=headerlink href=#nagios title="Permanent link">⚑</a></h2> <p><a href=https://www.nagios.org/ >Nagios</a> is an industry leader in IT infrastructure monitoring. It has four different products to choose from:</p> <ul> <li> <p>Nagios XI: Is an enterprise-ready server and network monitoring system that supplies data to track app or network infrastructure health, performance, availability, of the components, protocols, and services. It has a user-friendly interface that allows UI configuration, customized visualizations, and alert preferences.</p> </li> <li> <p>Nagios Log Server: It's used for log management and analysis of user scenarios. It has the ability to correlate logged events across different services and servers in real time, which helps with the investigation of incidents and the performance of root cause analysis.</p> <p>Because Nagios Log Server’s design is specifically for network security and audits, it lets users generate alerts for suspicious operations and commands. Log Server retains historical data from all events, supplying organizations with everything they need to pass a security audit.</p> </li> <li> <p>Nagios Network Analyzer: It's a tool for collecting and displaying either metrics or extra information about an application network. It identifies which IPs are communicating with the application servers and what requests they’re sending. The Network Analyzer maintains a record of all server traffic, including who connected a specific server, to a specific port and the specific request.</p> <p>This helps plan out server and network capacity, plus understand various kinds of security breaches likes unauthorized access, data leaks, DDoS, and viruses or malwares on servers.</p> </li> <li> <p>Nagios Fusion: is a compilation of the three tools Nagios offers. It provides a complete solution that assists businesses in satisfying any and all of their monitoring requirements. Its design is for scalability and for visibility of the application and all of its dependencies.</p> </li> </ul> <h2 id=prometheus>Prometheus<a class=headerlink href=#prometheus title="Permanent link">⚑</a></h2> <p><a href=prometheus.md>Prometheus</a> is a free software application used for event monitoring and alerting. It records real-time metrics in a time series database (allowing for high dimensionality) built using a HTTP pull model, with flexible queries and real-time alerting. The project is written in Go and licensed under the Apache 2 License, with source code available on GitHub, and is a graduated project of the Cloud Native Computing Foundation, along with Kubernetes and Envoy.</p> <p>At the core of the Prometheus monitoring system is the main server, which ingests samples from monitoring targets. A target is any application that exposes metrics according to the open specification understood by Prometheus. Since Prometheus pulls data, rather than expecting targets to actively push stats into the monitoring system, it supports a variety of service discovery integrations, like that with Kubernetes, to immediately adapt to changes in the set of targets.</p> <p>The second core component is the Alertmanager, implementing the idea of time series based alerting. It intelligently removes duplicate alerts sent by Prometheus servers, groups the alerts into informative notifications, and dispatches them to a variety of integrations, like those with PagerDuty and Slack. It also handles silencing of selected alerts and advanced routing configurations for notifications.</p> <p>There are several additional Prometheus components, such as client libraries for different programming languages, and a growing number of exporters. Exporters are small programs that provide Prometheus compatible metrics from systems that are not natively instrumented.</p> <h2 id=comparison>Comparison<a class=headerlink href=#comparison title="Permanent link">⚑</a></h2> <p>For each dimension we'll check how each solution meets the criteria. An aggregation of all the results can be found in the <a href=#summary>summary</a>.</p> <h3 id=open-source>Open source<a class=headerlink href=#open-source title="Permanent link">⚑</a></h3> <p>Only the Nagios Core is <a href=https://en.wikipedia.org/wiki/Nagios>open sourced</a>, it provides basic monitoring but it's enhanced by <a href=https://exchange.nagios.org/ >community contributions</a>. It's also the base of the rest solutions, which are proprietary.</p> <p>Prometheus is completely open source under the Apache 2.0 license.</p> <h3 id=community>Community<a class=headerlink href=#community title="Permanent link">⚑</a></h3> <p>In Nagios, only the Nagios Core is an open-source tool. The rest are proprietary, so there is no community behind them.</p> <p>Community contributions to Nagios are gathered in the <a href=https://exchange.nagios.org/ >Nagios Exchange</a>, it's hard to get other activity statistics than the overall number of contributions, but there are more than 850 addons, 4.5k plugins and 300 documentation contributions.</p> <p>Overall metrics (2021-02-22):</p> <table> <thead> <tr> <th>Metric</th> <th><a href=https://github.com/NagiosEnterprises/nagioscore>Nagios Core</a></th> <th><a href=https://github.com/prometheus/prometheus>Prometheus</a></th> </tr> </thead> <tbody> <tr> <td>Stars</td> <td>932</td> <td>35.4k</td> </tr> <tr> <td>Forks</td> <td>341</td> <td>5.7k</td> </tr> <tr> <td>Watch</td> <td>121</td> <td>1.2k</td> </tr> <tr> <td>Commits</td> <td>3.4k</td> <td>8.5k</td> </tr> <tr> <td>Open Issues</td> <td>195</td> <td>290</td> </tr> <tr> <td>Closed Issues</td> <td>455</td> <td>3.5k</td> </tr> <tr> <td>Open PR</td> <td>9</td> <td>116</td> </tr> <tr> <td>Closed PR</td> <td>155</td> <td>4.5k</td> </tr> </tbody> </table> <p>Last month metrics (2021-02-22):</p> <table> <thead> <tr> <th>Metric</th> <th><a href=https://github.com/NagiosEnterprises/nagioscore/pulse/monthly>Nagios Core</a></th> <th><a href=https://github.com/prometheus/prometheus/pulse/monthly>Prometheus</a></th> </tr> </thead> <tbody> <tr> <td>Active PR</td> <td>1</td> <td>80</td> </tr> <tr> <td>Active Issues</td> <td>3</td> <td>64</td> </tr> <tr> <td>Commits</td> <td>0</td> <td>74</td> </tr> <tr> <td>Authors</td> <td>0</td> <td>35</td> </tr> </tbody> </table> <p>We can see that Prometheus in comparison with Nagios Core is:</p> <ul> <li>More popular in terms of community contributions.</li> <li>More maintained.</li> <li>Growing more.</li> <li>Development is more distributed.</li> <li>Manages the issues collaboratively.</li> </ul> <p>This comparison is biased though, because Nagios comes from a time where GitHub and Git (and Youtube!) did not exist, and the communities formed around different sites.</p> <p>Also, given that Nagios has almost 20 years of existence, and that it forked from a previous monitoring project (NetSaint), the low number contributions indicate a stable and mature product, whereas the high numbers for Prometheus are indicators of a young, still in development product.</p> <p>Keep in mind that this comparison only analyzes the core, it doesn't take into account the metrics of the community contributions, as it is not easy to aggregate their statistics.</p> <p>Which makes Prometheus one of the biggest open-source projects in existence. It actually has hundreds of contributors maintaining it. The tool continues to be up-to-date to contemporary and popular apps, extending its list of exporters and responding to requests.</p> <p>On <a href=https://en.wikipedia.org/wiki/Nagios#2014_controversy_over_plugins_website>16 January 2014</a>, Nagios Enterprises redirected the nagios-plugins.org domain to a web server controlled by Nagios Enterprises without explicitly notifying the Nagios Plugins community team the consequences of their actions. Nagios Enterprises replaced the nagios-plugins team with a group of new, different members. The community team members who were replaced continued their work under the name Monitoring Plugins along with a new website with the new domain of monitoring-plugins.org. Which is a nasty move against the community.</p> <h3 id=configuration-and-usage>Configuration and usage<a class=headerlink href=#configuration-and-usage title="Permanent link">⚑</a></h3> <p>Neither solution is easy to configure, you need to invest time in them.</p> <p>Nagios is easier to use for non technical users though.</p> <h3 id=visualizations>Visualizations<a class=headerlink href=#visualizations title="Permanent link">⚑</a></h3> <p>The graphs and dashboards Prometheus provides don't meet today's needs. As a result, users resort to other visualization tools to display metrics collected by Prometheus, often Grafana.</p> <p>Nagios comes with a set of dashboards that fit the requirements of monitoring networks and infrastructure components. Yet, it still lacks graphs for more applicative-related issues.</p> <p>Personally I find Grafana dashboards more beautiful and easier to change. It also has a massive community behind providing customizable dashboards for free.</p> <h3 id=installation>Installation<a class=headerlink href=#installation title="Permanent link">⚑</a></h3> <p>Nagios comes as a downloadable bundle with dedicated packages for every product with Windows or Linux distributions. After downloading and installing the tool, a set of first-time configurations is required. Once you’ve installed the Nagios agents, data should start streaming into Nagios and its generic dashboards.</p> <p>Prometheus deployment is done through Docker containers that can spin up on every machine type, or through pre-compiled or self-compiled binaries.</p> <p>There are community maintained ansible roles for both solutions, doing a quick search I've found a Prometheus one that it's more maintained.</p> <p>For Kubernetes installation, I've only found helm charts for Prometheus.</p> <h3 id=kubernetes-integration>Kubernetes integration<a class=headerlink href=#kubernetes-integration title="Permanent link">⚑</a></h3> <p>Prometheus, as Kubernetes are leading projects of the <a href=https://www.cncf.io/ >Cloud Native Computing Foundation</a>, <a href=https://en.wikipedia.org/wiki/Cloud_Native_Computing_Foundation>which is</a> a Linux Foundation project that was founded in 2015 to help advance container technology and align the tech industry around its evolution.</p> <p>Prometheus has native support to be run in and to monitor Kubernetes clusters. Although Nagios <a href=https://exchange.nagios.org/directory/Plugins/Containers/kubernetes-2Dnagios/details>can monitor</a> Kubernetes, it's not meant to be run inside it.</p> <h3 id=documentation>Documentation<a class=headerlink href=#documentation title="Permanent link">⚑</a></h3> <p>I haven't used much the <a href=https://www.nagios.org/documentation/ >Nagios documentation</a>, but I can tell you that even though it's improving <a href=https://prometheus.io/docs/introduction/overview/ >Prometheus</a>' is not very complete, and you find yourself often looking at issues and stackoverflow.</p> <h3 id=integrations>Integrations<a class=headerlink href=#integrations title="Permanent link">⚑</a></h3> <p>Official Prometheus’ integrations are <a href=https://prometheus.io/docs/instrumenting/exporters/ >practically boundless</a>. The long list of existing exporters combined with the user’s ability to write new exporters allows integration with any tool, and PromQL allows users to query Prometheus data from any visualization tool that supports it.</p> <p>Nagios has a <a href=https://www.nagios.com/integrations/ >very limited list of official integrations</a>. Most of them are operating systems which use the agents to monitor other network components. Others include MongoDB, Oracle, Selenium, and VMware. Once again, the community comes to rescue us with <a href=https://exchange.nagios.org/ >their contributions</a>, keep in mind that you'll need to dive into the exchange for special monitoring needs.</p> <h3 id=alerts>Alerts<a class=headerlink href=#alerts title="Permanent link">⚑</a></h3> <p>Prometheus offers Alertmanager, a simple service that allows users to set thresholds and push alerts when breaches occur.</p> <p>Nagios uses a variety of media channels for alerts, including email, SMS, and audio alerts. Because its integration with the operating system is swift, Nagios even knows to generate a WinPopup message with the alert details.</p> <p>On a side note, there is an alert Nagios plugin that alerts for Prometheus query results.</p> <p>As Nagios doesn't support labels for the metrics, so there is <a href=https://prometheus.io/docs/introduction/comparison/#scope-2>no grouping, routing or deduplication</a> of alerts as Prometheus do. Also the silence of alerts is done individually on each alert, while in Prometheus it's done using labels, which is more powerful.</p> <h3 id=advanced-monitorization>Advanced monitorization<a class=headerlink href=#advanced-monitorization title="Permanent link">⚑</a></h3> <p>Nagios alerting is based on the return codes of scripts, Prometheus on the other hand alerts based on metrics, this fact together with the easy and powerful query language PromQL allows the user to make much more rich alerts that better represent the state of the system to monitor.</p> <p>In Nagios there is no concept of making queries to the gathered data.</p> <h3 id=data-storage>Data storage<a class=headerlink href=#data-storage title="Permanent link">⚑</a></h3> <p>Nagios has no storage per-se, beyond the current check state. There are plugins which can store data such as for <a href=https://docs.pnp4nagios.org/ >visualisation</a>.</p> <p>Prometheus has a defined amount of data that's available (for example 30 days), to be able to store more you need to use Thanos, the prometheus long term storage solution.</p> <h3 id=high-availability>High availability<a class=headerlink href=#high-availability title="Permanent link">⚑</a></h3> <p>Nagios servers are standalone, they are not meant to collaborate with other instances, so to achieve high availability you need to do it the old way, with multiple independent instances with a loadbalancer upfront.</p> <p>Prometheus can have different servers running collaboratively, monitoring between themselves. So you get high availability for free without any special configuration.</p> <h3 id=dynamic-infrastructure>Dynamic infrastructure<a class=headerlink href=#dynamic-infrastructure title="Permanent link">⚑</a></h3> <p>In the past, infrastructure had a low rate of change, it was strange that you needed to add something to the monitorization system. Nowadays, with cloud infrastructures and kubernetes, instances are spawned and killed continuously.</p> <p>In Nagios, you need to manually configure each new service following the push architecture. In prometheus, thanks to the pull architecture and service discovery, new services are added and dead one removed automatically.</p> <h3 id=custom-script-execution>Custom script execution<a class=headerlink href=#custom-script-execution title="Permanent link">⚑</a></h3> <p>Nagios alerting is based on the return codes of scripts, therefore it's straightforward to create an alert based on a custom script.</p> <p>If you need to monitor something in Prometheus, and nobody has done it before, the development costs of an ad-hoc solutions are incredibly high, compared to Nagios. You'd need either to:</p> <ul> <li> <p>Use the <a href=https://github.com/adhocteam/script_exporter>script_exporter</a> with your script. I've seen their repo, and the last commit is from March, and they <a href=https://github.com/adhocteam/script_exporter/issues/42>don't have a helm chart to install it</a>. I've searched other alternative exporters, but this one seems to be the best for this approach.</p> <p>The advantages of this approach is that you don't need to create and maintain a new prometheus exporter.</p> <p>The disadvantages though are that you'd have to:</p> <ul> <li>Manually install the required exporter resources in the cluster until a helm chart exists.</li> <li>Create the helm charts yourself if they don't develop it.</li> <li> <p>Integrate your tool inside the script_exporter docker through one of these ways:</p> <ul> <li>Changing the exporter Docker image to add it. Which would mean a Docker image to maintain.</li> <li>Mounting the binary through a volume inside kubernetes. Which would mean defining a way on how to upload it and assume the high availability penalty that a stateful kubernetes service entail with the cluster configuration right now.<ul> <li>If it's not already in your stack, it would mean adding a new exporter to maintain and a new development team to depend on.</li> </ul> </li> </ul> </li> </ul> <p>Alternatively you can use the script exporter binary in a baremetal or virtualized server instead of using a docker, that way you wouldn't need to maintain the different dockers for the different solutions, but you'd need a "dedicated" server for this purpose.</p> </li> <li> <p>Create your own exporter. You'd need to create a docker that exposes the command line functionality through a <code>metrics</code> endpoint. You wouldn't depend on a third party development team and would be able to use your script. On the other side it has the following disadvantages:</p> <ul> <li>We would need to create and maintain a new prometheus exporter. That would mean creating and maintaining the Docker with the command line tool and a simple http server that exposes the <code>/metrics</code> endpoint, that will run the command whenever the Prometheus server accesses this endpoint.</li> <li>We add a new exporter to maintain but we develop it ourselves, so we don't depend on third party developers.</li> </ul> </li> <li> <p>Use other exporters to do the check. For example, if you can deduce the critical API call that will decide if the script fails or succeeds, you could use the blackbox exporter to monitor it instead. The advantages of this solution are:</p> <ul> <li>We don't add new infrastructure to develop or maintain.</li> <li>We don't depend on third party development teams.</li> </ul> <p>And the disadvantage is that if the logic changes, we would need to update how we do the check.</p> </li> </ul> <h3 id=network-monitorization>Network monitorization<a class=headerlink href=#network-monitorization title="Permanent link">⚑</a></h3> <p><a href=https://prometheus.io/docs/introduction/faq/#can-i-monitor-network-devices>Both</a> can use the Simple Network Management Protocol (SNMP) to communicate with network switches or other components by using SNMP protocol to query their status.</p> <p>Not being an expert on the topic, knowing it's been one of the core focus of Nagios in the past years and as I've not been able to find good comparison between both, I'm going to suppose that even though both support network monitoring, Nagios does a better job.</p> <h3 id=summary>Summary<a class=headerlink href=#summary title="Permanent link">⚑</a></h3> <table> <thead> <tr> <th>Metric</th> <th>Nagios</th> <th>Prometheus</th> </tr> </thead> <tbody> <tr> <td><a href=#open-source>Open Source</a></td> <td>✓*</td> <td>✓✓</td> </tr> <tr> <td><a href=#community>Community</a></td> <td>✓</td> <td>✓✓</td> </tr> <tr> <td><a href=#configuration-and-usage>Configuration and usage</a></td> <td>✓</td> <td>x</td> </tr> <tr> <td><a href=#visualizations>Visualizations</a></td> <td>✓</td> <td>✓✓</td> </tr> <tr> <td><a href=#installation>Ansible Role</a></td> <td>✓</td> <td>✓✓</td> </tr> <tr> <td><a href=#installation>Helm chart</a></td> <td>x</td> <td>✓</td> </tr> <tr> <td><a href=#kubernetes>Kubernetes</a></td> <td>x</td> <td>✓</td> </tr> <tr> <td><a href=#documentation>Documentation</a></td> <td>✓</td> <td>x</td> </tr> <tr> <td><a href=#integrations>Integrations</a></td> <td>✓</td> <td>✓✓</td> </tr> <tr> <td><a href=#alerts>Alerts</a></td> <td>✓</td> <td>✓✓</td> </tr> <tr> <td><a href=#advanced-monitoring>Advanced monitoring</a></td> <td>x</td> <td>✓</td> </tr> <tr> <td><a href=#custom-script-execution>Custom script execution</a></td> <td>✓✓</td> <td>✓</td> </tr> <tr> <td><a href=#data-storage>Data storage</a></td> <td>x</td> <td>✓</td> </tr> <tr> <td><a href=#dynamic-infrastructure>Dynamic infrastructure</a></td> <td>x</td> <td>✓</td> </tr> <tr> <td><a href=#high-availability>High availability</a></td> <td>✓</td> <td>✓✓</td> </tr> <tr> <td><a href=#network-monitoring>Network Monitoring</a></td> <td>✓</td> <td>✓</td> </tr> </tbody> </table> <p>* Only Nagios Core and the community contributions are open sourced.</p> <p>Where each symbol means:</p> <ul> <li>x: Doesn't meet the criteria.</li> <li>✓: Meets the criteria.</li> <li>✓✓: Meets the criteria and it's better than the other solution.</li> <li>?: I'm not sure.</li> </ul> <p>Nagios is the reference of the old-school monitoring solutions, suitable for basic monitoring of small, static and/or old-school systems where blackbox probing is sufficient.</p> <p>Prometheus is the reference of the new-wave monitoring solutions, suitable for more advanced monitoring of dynamic, new-wave systems (web applications, cloud, containers or Kubernetes) where whitebox monitoring is desired.</p> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">⚑</a></h2> <ul> <li><a href=https://logz.io/blog/prometheus-vs-nagios-metrics/ >Logz io post on Prometheus vs Nagios</a></li> </ul> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2024-08-30T08:35:48+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-08-30</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/benkyonodo target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.instant", "navigation.top", "content.code.annotate", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.8fd75fb4.min.js></script> <script src=../js/timeago.min.js></script> <script src=../js/timeago_mkdocs_material.js></script> </body> </html>