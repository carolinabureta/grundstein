<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content=My><meta name=author content=Lyz><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.11"><title>Hard Drive Health - The green Book</title><link rel=stylesheet href=../assets/stylesheets/main.7e359304.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../css/timeago.css><link rel=stylesheet href=../stylesheets/extra.css><link rel=stylesheet href=../stylesheets/links.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=light-blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#check-the-warranty-status class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> </div> </aside> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="The green Book" class="md-header__button md-logo" aria-label="The green Book" data-md-component=logo> <img src=../img/moo_labastelaria.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> The green Book </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Hard Drive Health </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=light-blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue-grey data-md-color-accent=light-blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/realcaptainsolaris/redbook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> realcaptainsolaris/redbook </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="The green Book" class="md-nav__button md-logo" aria-label="The green Book" data-md-component=logo> <img src=../img/moo_labastelaria.png alt=logo> </a> The green Book </label> <div class=md-nav__source> <a href=https://github.com/realcaptainsolaris/redbook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> realcaptainsolaris/redbook </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../contact/ class=md-nav__link> <span class=md-ellipsis> Contact </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Uebungen </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Uebungen </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../uebungen/beispiel/ class=md-nav__link> <span class=md-ellipsis> Test1 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> DesignLab </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> DesignLab </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../designlab/slime.md class=md-nav__link> <span class=md-ellipsis> Slime </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> DesignClub </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> DesignClub </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../designclub/concept.md class=md-nav__link> <span class=md-ellipsis> Concept </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#check-the-warranty-status class=md-nav__link> <span class=md-ellipsis> Check the warranty status </span> </a> </li> <li class=md-nav__item> <a href=#wipe-all-the-disk class=md-nav__link> <span class=md-ellipsis> Wipe all the disk </span> </a> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#smart-error-currentpendingsector-detected-on-host class=md-nav__link> <span class=md-ellipsis> SMART error (CurrentPendingSector) detected on host </span> </a> </li> <li class=md-nav__item> <a href=#bad-block-analysis class=md-nav__link> <span class=md-ellipsis> Bad block analysis </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#links class=md-nav__link> <span class=md-ellipsis> Links </span> </a> <nav class=md-nav aria-label=Links> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bad-blocks class=md-nav__link> <span class=md-ellipsis> Bad blocks </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Hard Drive Health</h1> <p>Hard drives die, so we must be ready for that to happen. There are several solutions, such as using <a href=https://en.wikipedia.org/wiki/RAID>RAID</a> to minimize the impact of a disk loss, but even then, we should monitor the <a href=https://en.wikipedia.org/wiki/Bad_sector>bad sectors</a> to see when are our disks dying.</p> <p><a href=https://en.wikipedia.org/wiki/S.M.A.R.T.>S.M.A.R.T</a> (Self-Monitoring, Analysis and Reporting Technology; often written as SMART) is a monitoring system included in computer hard disk drives (HDDs), solid-state drives (SSDs), and eMMC drives. Its primary function is to detect and report various indicators of drive reliability with the intent of anticipating imminent hardware failures.</p> <p>Between all the SMART attributes, some that define define the health status of the hard drive, such as:</p> <ul> <li><em>Reallocated Sectors Count</em>: Count of reallocated sectors. The raw value represents a count of the bad sectors that have been found and remapped. Thus, the higher the attribute value, the more sectors the drive has had to reallocate. This value is primarily used as a metric of the life expectancy of the drive; a drive which has had any reallocations at all is significantly more likely to fail in the immediate months.</li> <li><em>Spin Retry Count</em>: Count of retry of spin start attempts. This attribute stores a total count of the spin start attempts to reach the fully operational speed (under the condition that the first attempt was unsuccessful). An increase of this attribute value is a sign of problems in the hard disk mechanical subsystem.</li> <li><em>Reallocate Event Count</em>: Count of remap operations. The raw value of this attribute shows the total count of attempts to transfer data from reallocated sectors to a spare area. Both successful and unsuccessful attempts are counted.</li> <li> <p><em>Current Pending Sector Count</em>: Count of "unstable" sectors (waiting to be remapped, because of unrecoverable read errors). If an unstable sector is subsequently read successfully, the sector is remapped and this value is decreased. Read errors on a sector will not remap the sector immediately (since the correct value cannot be read and so the value to remap is not known, and also it might become readable later); instead, the drive firmware remembers that the sector needs to be remapped, and will remap it the next time it's written.</p> <p>However, some drives will not immediately remap such sectors when written; instead the drive will first attempt to write to the problem sector and if the write operation is successful then the sector will be marked good (in this case, the "Reallocation Event Count" (0xC4) will not be increased). This is a serious shortcoming, for if such a drive contains marginal sectors that consistently fail only after some time has passed following a successful write operation, then the drive will never remap these problem sectors. * <em>Offline Uncorrectable Sector Count</em>: The total count of uncorrectable errors when reading/writing a sector. A rise in the value of this attribute indicates defects of the disk surface and/or problems in the mechanical subsystem.</p> </li> </ul> <h2 id=check-the-warranty-status>Check the warranty status<a class=headerlink href=#check-the-warranty-status title="Permanent link">⚑</a></h2> <p>If your drive is still under warranty from the manufacturer you may consider RMA’ing the drive (initiating a warranty return process).</p> <ul> <li><a href=http://support.seagate.com/customer/en-US/warranty_validation.jsp>Seagate Warranty Check</a></li> <li><a href="https://support.wdc.com/warranty/warrantystatus.aspx?lang=en">Western Digital (WD) Warranty Check</a></li> <li><a href=http://www1.hgst.com/warranty/index_gtech_serial.do>HGST Warranty Check</a></li> <li><a href=https://support.toshiba.com/warranty>Toshiba Warranty Check</a></li> </ul> <h2 id=wipe-all-the-disk>Wipe all the disk<a class=headerlink href=#wipe-all-the-disk title="Permanent link">⚑</a></h2> <p>Sometimes the <code>CurrentPendingSector</code> doesn't get reallocated, if you don't mind about the data in the disk, you can wipe it all with:</p> <div class=highlight><pre><span></span><code>dd<span class=w> </span><span class=k>if</span><span class=o>=</span>/dev/zero<span class=w> </span><span class=nv>of</span><span class=o>=</span>/dev/<span class=o>{{</span><span class=w> </span>disk_id<span class=w> </span><span class=o>}}</span><span class=w> </span><span class=nv>bs</span><span class=o>=</span><span class=m>4096</span><span class=w> </span><span class=nv>status</span><span class=o>=</span>progress
</code></pre></div> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">⚑</a></h2> <h3 id=smart-error-currentpendingsector-detected-on-host>SMART error (CurrentPendingSector) detected on host<a class=headerlink href=#smart-error-currentpendingsector-detected-on-host title="Permanent link">⚑</a></h3> <p>As stated above, this means that at some point, the drive was unable to successfully read the data from X different sectors, and hence have flagged them for possible reallocation. The sector will be marked as reallocated if a subsequent write fails. If the write succeeds, it is removed from current pending sectors and assumed to be OK.</p> <p>Start with a long self test with <code>smartctl</code>. Assuming the disk to test is <code>/dev/sdd</code>:</p> <div class=highlight><pre><span></span><code>smartctl<span class=w> </span>-t<span class=w> </span>long<span class=w> </span>/dev/sdd
</code></pre></div> <p>The command will respond with an estimate of how long it thinks the test will take to complete. (But this assumes that no errors will be found!)</p> <p>To check progress use:</p> <div class=highlight><pre><span></span><code>smartctl<span class=w> </span>-A<span class=w> </span>/dev/sdd<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>remaining
<span class=c1># or</span>
smartctl<span class=w> </span>-c<span class=w> </span>/dev/sdd<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>remaining
</code></pre></div> <p>Don't check too often because it can abort the test with some drives. If you receive an empty output, examine the reported status with:</p> <div class=highlight><pre><span></span><code>smartctl<span class=w> </span>-l<span class=w> </span>selftest<span class=w> </span>/dev/sdd
</code></pre></div> <p>You will see something like this:</p> <div class=highlight><pre><span></span><code><span class=o>===</span><span class=w> </span>START<span class=w> </span>OF<span class=w> </span>READ<span class=w> </span>SMART<span class=w> </span>DATA<span class=w> </span><span class=nv>SECTION</span><span class=w> </span><span class=o>===</span>
SMART<span class=w> </span>Self-test<span class=w> </span>log<span class=w> </span>structure<span class=w> </span>revision<span class=w> </span>number<span class=w> </span><span class=m>1</span>
Num<span class=w>  </span>Test_Description<span class=w>    </span>Status<span class=w>                  </span>Remaining<span class=w>  </span>LifeTime<span class=o>(</span>hours<span class=o>)</span><span class=w>  </span>LBA_of_first_error
<span class=c1># 1  Extended offline    Completed: read failure       20%      1596         44724966</span>
</code></pre></div> <p>So take that 'LBA' of 44724966 and multiply by (512/4096) which is the equivalent of 'divide by 8'</p> <div class=highlight><pre><span></span><code><span class=m>44724966</span><span class=w> </span>/<span class=w> </span><span class=nv>8</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>5590620</span>.75
</code></pre></div> <p>The sector to test then is <code>5590620</code>. If it is in the middle of a file, overwritting it will corrupt the file. If you are not cool with that, check the following posts to check if that sector belongs to a file:</p> <ul> <li><a href=https://nwsmith.blogspot.com/2007/08/smartmontools-and-fixing-unreadable.html>Smartmontools and fixing Unreadable Disk Sectors</a>.</li> <li><a href=https://www.smartmontools.org/wiki/BadBlockHowto>Smartmontools Bad Block how to</a></li> <li><a href=https://wiki.archlinux.org/index.php/Identify_damaged_files>Archlinux Identify damaged files page</a></li> <li><a href=https://wiki.archlinux.org/index.php/Badblocks>Archlinux badblocks page</a></li> </ul> <p>If you don't care to corrupt the file, use the following command to 'zero-out' the sector:</p> <div class=highlight><pre><span></span><code>dd<span class=w> </span><span class=k>if</span><span class=o>=</span>/dev/zero<span class=w> </span><span class=nv>of</span><span class=o>=</span>/dev/sda<span class=w> </span><span class=nv>conv</span><span class=o>=</span>sync<span class=w> </span><span class=nv>bs</span><span class=o>=</span><span class=m>4096</span><span class=w> </span><span class=nv>count</span><span class=o>=</span><span class=m>1</span><span class=w> </span><span class=nv>seek</span><span class=o>=</span><span class=m>5590620</span>
<span class=m>1</span>+0<span class=w> </span>records<span class=w> </span><span class=k>in</span>
<span class=m>1</span>+0<span class=w> </span>records<span class=w> </span>out

sync
</code></pre></div> <p>Now retry the <code>smartctl -t short</code> (or <code>smartctl -t long</code> if <code>short</code> fails) and see if the test is able to finish the test without errors:</p> <div class=highlight><pre><span></span><code>=== START OF READ SMART DATA SECTION ===
SMART Self-test log structure revision number 1
Num  Test_Description    Status                  Remaining  LifeTime(hours)  LBA_of_first_error
# 1  Short offline       Completed without error       00%     11699         -
# 2  Extended offline    Completed: read failure       90%     11680         65344288
# 3  Extended offline    Completed: read failure       90%     11675         65344288
</code></pre></div> <p>If reading errors remain, repeat the steps above until they don't or skip to the <a href=#bad-block-analysis>bad block analysis step</a>.</p> <p><code>Current_Pending_Sector</code> should be <code>0</code> now and the drive will probably be fine. As long as <code>Reallocated_Sector_Ct</code> is zero, you should be fine. Even a few reallocated sectors seems OK, but if that count starts to increment frequently, then that is a danger sign. To regularly keep a close eye on the counters use <code>smartd</code> to schedule daily tests.</p> <p>If <code>Current_Pending_Sector</code> is still not <code>0</code>, we need to do a deeper <a href=#bad-block-analysis>analysis on the bad blocks</a>.</p> <h3 id=bad-block-analysis>Bad block analysis<a class=headerlink href=#bad-block-analysis title="Permanent link">⚑</a></h3> <p>The SMART <code>long</code> test <a href=https://www.linuxquestions.org/questions/linux-hardware-18/smartd-currently-unreadable-pending-sectors-errors-4175659756/ >gives no guarantee to find every error</a>. To find them, we're going to use the <code>badblocks</code> tool instead.</p> <p>There is read-only mode (default) which is the least accurate. There is the destructive write-mode (-w option) which is the most accurate but takes longer and will (obviously) destroy all data on the drive, thus making it quite useless for matching sectors up to files. There is finally the non-destructive read-write mode which is probably as accurate as the destructive mode, with the only real downside that it is probably the slowest. However, if a drive is known to be failing then read-only mode is probably still the safest.</p> <h2 id=links>Links<a class=headerlink href=#links title="Permanent link">⚑</a></h2> <ul> <li><a href=https://en.wikipedia.org/wiki/S.M.A.R.T.>S.M.A.R.T Wikipedia article</a>.</li> <li><a href=https://github.com/linuxhw/SMART>linux-hardware SMART disk probes</a>.</li> </ul> <h3 id=bad-blocks>Bad blocks<a class=headerlink href=#bad-blocks title="Permanent link">⚑</a></h3> <ul> <li><a href=https://nwsmith.blogspot.com/2007/08/smartmontools-and-fixing-unreadable.html>Smartmontools and fixing Unreadable Disk Sectors</a>.</li> <li><a href=https://www.smartmontools.org/wiki/BadBlockHowto>Smartmontools Bad Block how to</a></li> <li><a href=https://wiki.archlinux.org/index.php/Identify_damaged_files>Archlinux Identify damaged files page</a></li> <li><a href=https://wiki.archlinux.org/index.php/Badblocks>Archlinux badblocks page</a></li> <li><a href=https://harddrivegeek.com/current-pending-sector-count/ >Hard drive geek guide on reducing the current pending sector count</a>.</li> <li><a href=https://hiddenc0de.wordpress.com/2015/06/12/how-to-check-bad-sectors-or-bad-blocks-on-hard-disk-in-linux/ >Hiddencode guide on how to check bad sectors</a></li> <li><a href=https://hiddenc0de.wordpress.com/2015/06/12/how-to-fix-bad-sectors-or-bad-blocks-on-hard-disk/ >Hiddencode guide on how to fix bad sectors</a></li> </ul> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2024-08-30T08:35:48+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-08-30</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/benkyonodo target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.instant", "navigation.top", "content.code.annotate", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.8fd75fb4.min.js></script> <script src=../js/timeago.min.js></script> <script src=../js/timeago_mkdocs_material.js></script> </body> </html>